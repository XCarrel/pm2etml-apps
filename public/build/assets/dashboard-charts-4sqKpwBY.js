import{aj as yt,G as nt,a2 as z,bk as Mr,K as Y,bl as Gi,b8 as At,i as O,bm as ae,bn as Qt,u as Ni,o as ft,N as b,b1 as W,ak as L,bo as Wi,V as F,C as H,aX as Ir,bp as Tr,bq as Tt,br as ne,bs as Cr,aT as at,bt as Ar,_ as P,ap as mt,bu as N,b2 as _t,H as Dr,p as K,d as X,bv as J,b3 as it,aI as vt,at as q,bw as Lr,aq as xe,a6 as B,bx as Rr,by as kr,bz as Pr,bA as pt,R as Q,bB as Fi,bC as He,bD as Or,D as Jt,bE as Zi,bF as Vr,bG as zr,bH as Er,h as G,bI as $i,bJ as te,bK as Br,bL as Ge,bM as Ne,bN as Hr,bO as Gr,a8 as ht,a7 as Dt,aZ as zt,bP as Nr,bQ as Wr,bR as oe,b6 as We,bS as Fr,bT as Zr,a_ as It,bU as Fe,ar as $r,bV as Yr,an as Xr,q as Ur,bW as Kr,bX as Ze,bY as jr,bZ as qr,b_ as Le,ai as Ut,ay as Re,aD as Yi,b$ as Qr,v as Xi,c0 as Jr,E as ta,bd as ea,bc as ia,f as ra,c1 as Se,aU as aa,c2 as Ct,c3 as na,a as Lt,av as Ui,W as Et,aw as oa,c4 as sa,c5 as Kt,c6 as Ki,a9 as la,c7 as ji,ad as ua,c8 as ha,c9 as ca,Y as $e,ca as da,Z as pa,O as fa,cb as va,cc as Ye,cd as ga,ce as qi,aA as Ht,cf as be,b9 as ya,cg as ma,ch as Qi,ci as _a,cj as xa,ck as Sa,cl as ba,cm as Gt,cn as wa,co as Ma,cp as Ia,cq as Nt,cr as Ta}from"./echarts-core-ZUOL-v90.js";import{g as Ca,A as Aa,l as Xe,m as Da,a as La,c as Ra,i as ka,s as Bt,V as Z,S as Pa,L as Oa,b as Va,R as za,d as Ea,e as Ba,f as Ha}from"./echarts-charts-B5IhBX8y.js";var dt=yt(),Ue=W,se=L,Ga=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(i,t,e,r){var a=t.get("value"),o=t.get("status");if(this._axisModel=i,this._axisPointerModel=t,this._api=e,!(!r&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,a,i,t,e);var h=u.graphicKey;h!==this._lastGraphicKey&&this.clear(e),this._lastGraphicKey=h;var c=this._moveAnimation=this.determineAnimation(i,t);if(!s)s=this._group=new nt,this.createPointerEl(s,u,i,t),this.createLabelEl(s,u,i,t),e.getZr().add(s);else{var d=z(Ke,t,c);this.updatePointerEl(s,u,d),this.updateLabelEl(s,u,d,t)}qe(s,t,!0),this._renderHandle(a)}},n.prototype.remove=function(i){this.clear(i)},n.prototype.dispose=function(i){this.clear(i)},n.prototype.determineAnimation=function(i,t){var e=t.get("animation"),r=i.axis,a=r.type==="category",o=t.get("snap");if(!o&&!a)return!1;if(e==="auto"||e==null){var s=this.animationThreshold;if(a&&r.getBandWidth()>s)return!0;if(o){var l=Ca(i).seriesDataCount,u=r.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return e===!0},n.prototype.makeElOption=function(i,t,e,r,a){},n.prototype.createPointerEl=function(i,t,e,r){var a=t.pointer;if(a){var o=dt(i).pointerEl=new Mr[a.type](Ue(t.pointer));i.add(o)}},n.prototype.createLabelEl=function(i,t,e,r){if(t.label){var a=dt(i).labelEl=new Y(Ue(t.label));i.add(a),je(a,r)}},n.prototype.updatePointerEl=function(i,t,e){var r=dt(i).pointerEl;r&&t.pointer&&(r.setStyle(t.pointer.style),e(r,{shape:t.pointer.shape}))},n.prototype.updateLabelEl=function(i,t,e,r){var a=dt(i).labelEl;a&&(a.setStyle(t.label.style),e(a,{x:t.label.x,y:t.label.y}),je(a,r))},n.prototype._renderHandle=function(i){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,e=this._api.getZr(),r=this._handle,a=t.getModel("handle"),o=t.get("status");if(!a.get("show")||!o||o==="hide"){r&&e.remove(r),this._handle=null;return}var s;this._handle||(s=!0,r=this._handle=Gi(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){At(u.event)},onmousedown:se(this._onHandleDragMove,this,0,0),drift:se(this._onHandleDragMove,this),ondragend:se(this._onHandleDragEnd,this)}),e.add(r)),qe(r,t,!1),r.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");O(l)||(l=[l,l]),r.scaleX=l[0]/2,r.scaleY=l[1]/2,ae(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(i,s)}},n.prototype._moveHandleToValue=function(i,t){Ke(this._axisPointerModel,!t&&this._moveAnimation,this._handle,le(this.getHandleTransform(i,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(i,t){var e=this._handle;if(e){this._dragging=!0;var r=this.updateHandleTransform(le(e),[i,t],this._axisModel,this._axisPointerModel);this._payloadInfo=r,e.stopAnimation(),e.attr(le(r)),dt(e).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var i=this._handle;if(i){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var i=this._handle;if(i){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(i){this._lastValue=null,this._lastStatus=null;var t=i.getZr(),e=this._group,r=this._handle;t&&e&&(this._lastGraphicKey=null,e&&t.remove(e),r&&t.remove(r),this._group=null,this._handle=null,this._payloadInfo=null),Qt(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(i,t,e){return e=e||0,{x:i[e],y:i[1-e],width:t[e],height:t[1-e]}},n}();function Ke(n,i,t,e){Ji(dt(t).lastProp,e)||(dt(t).lastProp=e,i?Ni(t,e,n):(t.stopAnimation(),t.attr(e)))}function Ji(n,i){if(ft(n)&&ft(i)){var t=!0;return b(i,function(e,r){t=t&&Ji(n[r],e)}),!!t}else return n===i}function je(n,i){n[i.get(["label","show"])?"show":"hide"]()}function le(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function qe(n,i,t){var e=i.get("z"),r=i.get("zlevel");n&&n.traverse(function(a){a.type!=="group"&&(e!=null&&(a.z=e),r!=null&&(a.zlevel=r),a.silent=t)})}function Na(n){var i=n.get("type"),t=n.getModel(i+"Style"),e;return i==="line"?(e=t.getLineStyle(),e.fill=null):i==="shadow"&&(e=t.getAreaStyle(),e.stroke=null),e}function Wa(n,i,t,e,r){var a=t.get("value"),o=tr(a,i.axis,i.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),s=t.getModel("label"),l=ne(s.get("padding")||0),u=s.getFont(),h=Cr(o,u),c=r.position,d=h.width+l[1]+l[3],p=h.height+l[0]+l[2],f=r.align;f==="right"&&(c[0]-=d),f==="center"&&(c[0]-=d/2);var v=r.verticalAlign;v==="bottom"&&(c[1]-=p),v==="middle"&&(c[1]-=p/2),Fa(c,d,p,e);var g=s.get("backgroundColor");(!g||g==="auto")&&(g=i.get(["axisLine","lineStyle","color"])),n.label={x:c[0],y:c[1],style:at(s,{text:o,font:u,fill:s.getTextColor(),padding:l,backgroundColor:g}),z2:10}}function Fa(n,i,t,e){var r=e.getWidth(),a=e.getHeight();n[0]=Math.min(n[0]+i,r)-i,n[1]=Math.min(n[1]+t,a)-t,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function tr(n,i,t,e,r){n=i.scale.parse(n);var a=i.scale.getLabel({value:n},{precision:r.precision}),o=r.formatter;if(o){var s={value:Wi(i,{value:n}),axisDimension:i.dim,axisIndex:i.index,seriesData:[]};b(e,function(l){var u=t.getSeriesByIndex(l.seriesIndex),h=l.dataIndexInside,c=u&&u.getDataParams(h);c&&s.seriesData.push(c)}),F(o)?a=o.replace("{value}",a):H(o)&&(a=o(s))}return a}function er(n,i,t){var e=Ar();return Ir(e,e,t.rotation),Tr(e,e,t.position),Tt([n.dataToCoord(i),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],e)}function Za(n,i,t,e,r,a){var o=Aa.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=r.get(["label","margin"]),Wa(i,e,r,a,{position:er(e.axis,n,t),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function $a(n,i,t){return t=t||0,{x1:n[t],y1:n[1-t],x2:i[t],y2:i[1-t]}}function Ya(n,i,t){return t=t||0,{x:n[t],y:n[1-t],width:i[t],height:i[1-t]}}var Xa=function(n){P(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.makeElOption=function(t,e,r,a,o){var s=r.axis,l=s.grid,u=a.get("type"),h=Qe(l,s).getOtherAxis(s).getGlobalExtent(),c=s.toGlobalCoord(s.dataToCoord(e,!0));if(u&&u!=="none"){var d=Na(a),p=Ua[u](s,c,h);p.style=d,t.graphicKey=p.type,t.pointer=p}var f=Xe(l.model,r);Za(e,t,f,r,a,o)},i.prototype.getHandleTransform=function(t,e,r){var a=Xe(e.axis.grid.model,e,{labelInside:!1});a.labelMargin=r.get(["handle","margin"]);var o=er(e.axis,t,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},i.prototype.updateHandleTransform=function(t,e,r,a){var o=r.axis,s=o.grid,l=o.getGlobalExtent(!0),u=Qe(s,o).getOtherAxis(o).getGlobalExtent(),h=o.dim==="x"?0:1,c=[t.x,t.y];c[h]+=e[h],c[h]=Math.min(l[1],c[h]),c[h]=Math.max(l[0],c[h]);var d=(u[1]+u[0])/2,p=[d,d];p[h]=c[h];var f=[{verticalAlign:"middle"},{align:"center"}];return{x:c[0],y:c[1],rotation:t.rotation,cursorPoint:p,tooltipOption:f[h]}},i}(Ga);function Qe(n,i){var t={};return t[i.dim+"AxisIndex"]=i.index,n.getCartesian(t)}var Ua={line:function(n,i,t){var e=$a([i,t[0]],[i,t[1]],Je(n));return{type:"Line",subPixelOptimize:!0,shape:e}},shadow:function(n,i,t){var e=Math.max(1,n.getBandWidth()),r=t[1]-t[0];return{type:"Rect",shape:Ya([i-e/2,t[0]],[e,r],Je(n))}}};function Je(n){return n.dim==="x"?0:1}var Ka=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.type="axisPointer",i.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},i}(mt),rt=yt(),ja=b;function ir(n,i,t){if(!N.node){var e=i.getZr();rt(e).records||(rt(e).records={}),qa(e,i);var r=rt(e).records[n]||(rt(e).records[n]={});r.handler=t}}function qa(n,i){if(rt(n).initialized)return;rt(n).initialized=!0,t("click",z(ti,"click")),t("mousemove",z(ti,"mousemove")),t("globalout",Ja);function t(e,r){n.on(e,function(a){var o=tn(i);ja(rt(n).records,function(s){s&&r(s,a,o.dispatchAction)}),Qa(o.pendings,i)})}}function Qa(n,i){var t=n.showTip.length,e=n.hideTip.length,r;t?r=n.showTip[t-1]:e&&(r=n.hideTip[e-1]),r&&(r.dispatchAction=null,i.dispatchAction(r))}function Ja(n,i,t){n.handler("leave",null,t)}function ti(n,i,t,e){i.handler(n,t,e)}function tn(n){var i={showTip:[],hideTip:[]},t=function(e){var r=i[e.type];r?r.push(e):(e.dispatchAction=t,n.dispatchAction(e))};return{dispatchAction:t,pendings:i}}function we(n,i){if(!N.node){var t=i.getZr(),e=(rt(t).records||{})[n];e&&(rt(t).records[n]=null)}}var en=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.render=function(t,e,r){var a=e.getComponent("tooltip"),o=t.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";ir("axisPointer",r,function(s,l,u){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},i.prototype.remove=function(t,e){we("axisPointer",e)},i.prototype.dispose=function(t,e){we("axisPointer",e)},i.type="axisPointer",i}(_t);function rr(n,i){var t=[],e=n.seriesIndex,r;if(e==null||!(r=i.getSeriesByIndex(e)))return{point:[]};var a=r.getData(),o=Dr(a,n);if(o==null||o<0||O(o))return{point:[]};var s=a.getItemGraphicEl(o),l=r.coordinateSystem;if(r.getTooltipPosition)t=r.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(n.isStacked){var u=l.getBaseAxis(),h=l.getOtherAxis(u),c=h.dim,d=u.dim,p=c==="x"||c==="radius"?1:0,f=a.mapDimension(d),v=[];v[p]=a.get(f,o),v[1-p]=a.get(a.getCalculationInfo("stackResultDimension"),o),t=l.dataToPoint(v)||[]}else t=l.dataToPoint(a.getValues(K(l.dimensions,function(y){return a.mapDimension(y)}),o))||[];else if(s){var g=s.getBoundingRect().clone();g.applyTransform(s.transform),t=[g.x+g.width/2,g.y+g.height/2]}return{point:t,el:s}}var ei=yt();function rn(n,i,t){var e=n.currTrigger,r=[n.x,n.y],a=n,o=n.dispatchAction||L(t.dispatchAction,t),s=i.getComponent("axisPointer").coordSysAxesInfo;if(s){jt(r)&&(r=rr({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},i).point);var l=jt(r),u=a.axesInfo,h=s.axesInfo,c=e==="leave"||jt(r),d={},p={},f={list:[],map:{}},v={showPointer:z(nn,p),showTooltip:z(on,f)};b(s.coordSysMap,function(y,m){var _=l||y.containPoint(r);b(s.coordSysAxesInfo[m],function(x,S){var w=x.axis,M=hn(u,x);if(!c&&_&&(!u||M)){var I=M&&M.value;I==null&&!l&&(I=w.pointToData(r)),I!=null&&ii(x,I,v,!1,d)}})});var g={};return b(h,function(y,m){var _=y.linkGroup;_&&!p[m]&&b(_.axesInfo,function(x,S){var w=p[S];if(x!==y&&w){var M=w.value;_.mapper&&(M=y.axis.scale.parse(_.mapper(M,ri(x),ri(y)))),g[y.key]=M}})}),b(g,function(y,m){ii(h[m],y,v,!0,d)}),sn(p,h,d),ln(f,r,n,o),un(h,o,t),d}}function ii(n,i,t,e,r){var a=n.axis;if(!(a.scale.isBlank()||!a.containData(i))){if(!n.involveSeries){t.showPointer(n,i);return}var o=an(i,n),s=o.payloadBatch,l=o.snapToValue;s[0]&&r.seriesIndex==null&&X(r,s[0]),!e&&n.snap&&a.containData(l)&&l!=null&&(i=l),t.showPointer(n,i,s),t.showTooltip(n,o,l)}}function an(n,i){var t=i.axis,e=t.dim,r=n,a=[],o=Number.MAX_VALUE,s=-1;return b(i.seriesModels,function(l,u){var h=l.getData().mapDimensionsAll(e),c,d;if(l.getAxisTooltipData){var p=l.getAxisTooltipData(h,n,t);d=p.dataIndices,c=p.nestestValue}else{if(d=l.getData().indicesOfNearest(h[0],n,t.type==="category"?.5:null),!d.length)return;c=l.getData().get(h[0],d[0])}if(!(c==null||!isFinite(c))){var f=n-c,v=Math.abs(f);v<=o&&((v<o||f>=0&&s<0)&&(o=v,s=f,r=c,a.length=0),b(d,function(g){a.push({seriesIndex:l.seriesIndex,dataIndexInside:g,dataIndex:l.getData().getRawIndex(g)})}))}}),{payloadBatch:a,snapToValue:r}}function nn(n,i,t,e){n[i.key]={value:t,payloadBatch:e}}function on(n,i,t,e){var r=t.payloadBatch,a=i.axis,o=a.model,s=i.axisPointerModel;if(!(!i.triggerTooltip||!r.length)){var l=i.coordSys.model,u=Da(l),h=n.map[u];h||(h=n.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},n.list.push(h)),h.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:e,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:r.slice()})}}function sn(n,i,t){var e=t.axesInfo=[];b(i,function(r,a){var o=r.axisPointerModel.option,s=n[a];s?(!r.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!r.useHandle&&(o.status="hide"),o.status==="show"&&e.push({axisDim:r.axis.dim,axisIndex:r.axis.model.componentIndex,value:o.value})})}function ln(n,i,t,e){if(jt(i)||!n.list.length){e({type:"hideTip"});return}var r=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};e({type:"showTip",escapeConnect:!0,x:i[0],y:i[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:n.list})}function un(n,i,t){var e=t.getZr(),r="axisPointerLastHighlights",a=ei(e)[r]||{},o=ei(e)[r]={};b(n,function(u,h){var c=u.axisPointerModel.option;c.status==="show"&&u.triggerEmphasis&&b(c.seriesDataIndices,function(d){var p=d.seriesIndex+" | "+d.dataIndex;o[p]=d})});var s=[],l=[];b(a,function(u,h){!o[h]&&l.push(u)}),b(o,function(u,h){!a[h]&&s.push(u)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function hn(n,i){for(var t=0;t<(n||[]).length;t++){var e=n[t];if(i.axis.dim===e.axisDim&&i.axis.model.componentIndex===e.axisIndex)return e}}function ri(n){var i=n.axis.model,t={},e=t.axisDim=n.axis.dim;return t.axisIndex=t[e+"AxisIndex"]=i.componentIndex,t.axisName=t[e+"AxisName"]=i.name,t.axisId=t[e+"AxisId"]=i.id,t}function jt(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function ar(n){La.registerAxisPointerClass("CartesianAxisPointer",Xa),n.registerComponentModel(Ka),n.registerComponentView(en),n.registerPreprocessor(function(i){if(i){(!i.axisPointer||i.axisPointer.length===0)&&(i.axisPointer={});var t=i.axisPointer.link;t&&!O(t)&&(i.axisPointer.link=[t])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(i,t){i.getComponent("axisPointer").coordSysAxesInfo=Ra(i,t)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},rn)}function cn(n){J(ka),J(ar)}var ai=["x","y","radius","angle","single"],dn=["cartesian2d","polar","singleAxis"];function pn(n){var i=n.get("coordinateSystem");return vt(dn,i)>=0}function ut(n){return n+"Axis"}function fn(n,i){var t=it(),e=[],r=it();n.eachComponent({mainType:"dataZoom",query:i},function(h){r.get(h.uid)||s(h)});var a;do a=!1,n.eachComponent("dataZoom",o);while(a);function o(h){!r.get(h.uid)&&l(h)&&(s(h),a=!0)}function s(h){r.set(h.uid,!0),e.push(h),u(h)}function l(h){var c=!1;return h.eachTargetAxis(function(d,p){var f=t.get(d);f&&f[p]&&(c=!0)}),c}function u(h){h.eachTargetAxis(function(c,d){(t.get(c)||t.set(c,[]))[d]=!0})}return e}function nr(n){var i=n.ecModel,t={infoList:[],infoMap:it()};return n.eachTargetAxis(function(e,r){var a=i.getComponent(ut(e),r);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,l=t.infoMap.get(s);l||(l={model:o,axisModels:[]},t.infoList.push(l),t.infoMap.set(s,l)),l.axisModels.push(a)}}}),t}var ue=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(i){this.indexMap[i]||(this.indexList.push(i),this.indexMap[i]=!0)},n}(),ee=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return i.prototype.init=function(t,e,r){var a=ni(t);this.settledOption=a,this.mergeDefaultAndTheme(t,r),this._doInit(a)},i.prototype.mergeOption=function(t){var e=ni(t);q(this.option,t,!0),q(this.settledOption,e,!0),this._doInit(e)},i.prototype._doInit=function(t){var e=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var r=this.settledOption;b([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(e[a[0]]=r[a[0]]=null)},this),this._resetTarget()},i.prototype._resetTarget=function(){var t=this.get("orient",!0),e=this._targetAxisInfoMap=it(),r=this._fillSpecifiedTargetAxis(e);r?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(e,this._orient)),this._noTarget=!0,e.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},i.prototype._fillSpecifiedTargetAxis=function(t){var e=!1;return b(ai,function(r){var a=this.getReferringComponents(ut(r),Lr);if(a.specified){e=!0;var o=new ue;b(a.models,function(s){o.add(s.componentIndex)}),t.set(r,o)}},this),e},i.prototype._fillAutoTargetAxisByOrient=function(t,e){var r=this.ecModel,a=!0;if(a){var o=e==="vertical"?"y":"x",s=r.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=r.findComponents({mainType:"singleAxis",filter:function(h){return h.get("orient",!0)===e}});l(s,"single")}function l(u,h){var c=u[0];if(c){var d=new ue;if(d.add(c.componentIndex),t.set(h,d),a=!1,h==="x"||h==="y"){var p=c.getReferringComponents("grid",xe).models[0];p&&b(u,function(f){c.componentIndex!==f.componentIndex&&p===f.getReferringComponents("grid",xe).models[0]&&d.add(f.componentIndex)})}}}a&&b(ai,function(u){if(a){var h=r.findComponents({mainType:ut(u),filter:function(d){return d.get("type",!0)==="category"}});if(h[0]){var c=new ue;c.add(h[0].componentIndex),t.set(u,c),a=!1}}},this)},i.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(e){!t&&(t=e)},this),t==="y"?"vertical":"horizontal"},i.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},i.prototype._updateRangeUse=function(t){var e=this._rangePropMode,r=this.get("rangeMode");b([["start","startValue"],["end","endValue"]],function(a,o){var s=t[a[0]]!=null,l=t[a[1]]!=null;s&&!l?e[o]="percent":!s&&l?e[o]="value":r?e[o]=r[o]:s&&(e[o]="percent")})},i.prototype.noTarget=function(){return this._noTarget},i.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(e,r){t==null&&(t=this.ecModel.getComponent(ut(e),r))},this),t},i.prototype.eachTargetAxis=function(t,e){this._targetAxisInfoMap.each(function(r,a){b(r.indexList,function(o){t.call(e,a,o)})})},i.prototype.getAxisProxy=function(t,e){var r=this.getAxisModel(t,e);if(r)return r.__dzAxisProxy},i.prototype.getAxisModel=function(t,e){var r=this._targetAxisInfoMap.get(t);if(r&&r.indexMap[e])return this.ecModel.getComponent(ut(t),e)},i.prototype.setRawRange=function(t){var e=this.option,r=this.settledOption;b([["start","startValue"],["end","endValue"]],function(a){(t[a[0]]!=null||t[a[1]]!=null)&&(e[a[0]]=r[a[0]]=t[a[0]],e[a[1]]=r[a[1]]=t[a[1]])},this),this._updateRangeUse(t)},i.prototype.setCalculatedRange=function(t){var e=this.option;b(["start","startValue","end","endValue"],function(r){e[r]=t[r]})},i.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},i.prototype.getValueRange=function(t,e){if(t==null&&e==null){var r=this.findRepresentativeAxisProxy();if(r)return r.getDataValueWindow()}else return this.getAxisProxy(t,e).getDataValueWindow()},i.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var e,r=this._targetAxisInfoMap.keys(),a=0;a<r.length;a++)for(var o=r[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var u=this.getAxisProxy(o,s.indexList[l]);if(u.hostedBy(this))return u;e||(e=u)}return e},i.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},i.prototype.getOrient=function(){return this._orient},i.type="dataZoom",i.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],i.defaultOption={z:4,filterMode:"filter",start:0,end:100},i}(mt);function ni(n){var i={};return b(["start","end","startValue","endValue","throttle"],function(t){n.hasOwnProperty(t)&&(i[t]=n[t])}),i}var or=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.render=function(t,e,r,a){this.dataZoomModel=t,this.ecModel=e,this.api=r},i.type="dataZoom",i}(_t),Mt=b,oi=pt,vn=function(){function n(i,t,e,r){this._dimName=i,this._axisIndex=t,this.ecModel=r,this._dataZoomModel=e}return n.prototype.hostedBy=function(i){return this._dataZoomModel===i},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var i=[];return this.ecModel.eachSeries(function(t){if(pn(t)){var e=ut(this._dimName),r=t.getReferringComponents(e,xe).models[0];r&&this._axisIndex===r.componentIndex&&i.push(t)}},this),i},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return W(this._minMaxSpan)},n.prototype.calculateDataWindow=function(i){var t=this._dataExtent,e=this.getAxisModel(),r=e.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],u;Mt(["start","end"],function(d,p){var f=i[d],v=i[d+"Value"];a[p]==="percent"?(f==null&&(f=o[p]),v=r.parse(B(f,o,t))):(u=!0,v=v==null?t[p]:r.parse(v),f=B(v,t,o)),l[p]=v==null||isNaN(v)?t[p]:v,s[p]=f==null||isNaN(f)?o[p]:f}),oi(l),oi(s);var h=this._minMaxSpan;u?c(l,s,t,o,!1):c(s,l,o,t,!0);function c(d,p,f,v,g){var y=g?"Span":"ValueSpan";Bt(0,d,f,"all",h["min"+y],h["max"+y]);for(var m=0;m<2;m++)p[m]=B(d[m],f,v,!0),g&&(p[m]=r.parse(p[m]))}return{valueWindow:l,percentWindow:s}},n.prototype.reset=function(i){if(i===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=gn(this,this._dimName,t),this._updateMinMaxSpan();var e=this.calculateDataWindow(i.settledOption);this._valueWindow=e.valueWindow,this._percentWindow=e.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(i,t){if(i!==this._dataZoomModel)return;var e=this._dimName,r=this.getTargetSeriesModels(),a=i.get("filterMode"),o=this._valueWindow;if(a==="none")return;Mt(r,function(l){var u=l.getData(),h=u.mapDimensionsAll(e);if(h.length){if(a==="weakFilter"){var c=u.getStore(),d=K(h,function(p){return u.getDimensionIndex(p)},u);u.filterSelf(function(p){for(var f,v,g,y=0;y<h.length;y++){var m=c.get(d[y],p),_=!isNaN(m),x=m<o[0],S=m>o[1];if(_&&!x&&!S)return!0;_&&(g=!0),x&&(f=!0),S&&(v=!0)}return g&&f&&v})}else Mt(h,function(p){if(a==="empty")l.setData(u=u.map(p,function(v){return s(v)?v:NaN}));else{var f={};f[p]=o,u.selectRange(f)}});Mt(h,function(p){u.setApproximateExtent(o,p)})}});function s(l){return l>=o[0]&&l<=o[1]}},n.prototype._updateMinMaxSpan=function(){var i=this._minMaxSpan={},t=this._dataZoomModel,e=this._dataExtent;Mt(["min","max"],function(r){var a=t.get(r+"Span"),o=t.get(r+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=B(e[0]+o,e,[0,100],!0):a!=null&&(o=B(a,[0,100],e,!0)-e[0]),i[r+"Span"]=a,i[r+"ValueSpan"]=o},this)},n.prototype._setAxisModel=function(){var i=this.getAxisModel(),t=this._percentWindow,e=this._valueWindow;if(t){var r=Rr(e,[0,500]);r=Math.min(r,20);var a=i.axis.scale.rawExtentInfo;t[0]!==0&&a.setDeterminedMinMax("min",+e[0].toFixed(r)),t[1]!==100&&a.setDeterminedMinMax("max",+e[1].toFixed(r)),a.freeze()}},n}();function gn(n,i,t){var e=[1/0,-1/0];Mt(t,function(o){kr(e,o.getData(),i)});var r=n.getAxisModel(),a=Pr(r.axis.scale,r,e).calculate();return[a.min,a.max]}var yn={getTargetSeries:function(n){function i(r){n.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=n.getComponent(ut(o),s);r(o,s,l,a)})})}i(function(r,a,o,s){o.__dzAxisProxy=null});var t=[];i(function(r,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new vn(r,a,s,n),t.push(o.__dzAxisProxy))});var e=it();return b(t,function(r){b(r.getTargetSeriesModels(),function(a){e.set(a.uid,a)})}),e},overallReset:function(n,i){n.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(e,r){t.getAxisProxy(e,r).reset(t)}),t.eachTargetAxis(function(e,r){t.getAxisProxy(e,r).filterData(t,i)})}),n.eachComponent("dataZoom",function(t){var e=t.findRepresentativeAxisProxy();if(e){var r=e.getDataPercentWindow(),a=e.getDataValueWindow();t.setCalculatedRange({start:r[0],end:r[1],startValue:a[0],endValue:a[1]})}})}};function mn(n){n.registerAction("dataZoom",function(i,t){var e=fn(t,i);b(e,function(r){r.setRawRange({start:i.start,end:i.end,startValue:i.startValue,endValue:i.endValue})})})}var si=!1;function sr(n){si||(si=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,yn),mn(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function _n(n,i){var t=ne(i.get("padding")),e=i.getItemStyle(["color","opacity"]);return e.fill=i.get("backgroundColor"),n=new Q({shape:{x:n.x-t[3],y:n.y-t[0],width:n.width+t[1]+t[3],height:n.height+t[0]+t[2],r:i.get("borderRadius")},style:e,silent:!0,z2:-1}),n}var xn=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.type="tooltip",i.dependencies=["axisPointer"],i.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},i}(mt);function lr(n){var i=n.get("confine");return i!=null?!!i:n.get("renderMode")==="richText"}function ur(n){if(N.domSupported){for(var i=document.documentElement.style,t=0,e=n.length;t<e;t++)if(n[t]in i)return n[t]}}var hr=ur(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Sn=ur(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function cr(n,i){if(!n)return i;i=Fi(i,!0);var t=n.indexOf(i);return n=t===-1?i:"-"+n.slice(0,t)+"-"+i,n.toLowerCase()}function bn(n,i){var t=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return t?t[i]:null}var wn=cr(Sn,"transition"),ke=cr(hr,"transform"),Mn="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(N.transform3dSupported?"will-change:transform;":"");function In(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function Tn(n,i,t){if(!F(t)||t==="inside")return"";var e=n.get("backgroundColor"),r=n.get("borderWidth");i=Jt(i);var a=In(t),o=Math.max(Math.round(r)*1.5,6),s="",l=ke+":",u;vt(["left","right"],a)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=a==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=a==="top"?225:45)+"deg)");var h=u*Math.PI/180,c=o+r,d=c*Math.abs(Math.cos(h))+c*Math.abs(Math.sin(h)),p=Math.round(((d-Math.SQRT2*r)/2+Math.SQRT2*r-(d-c)/2)*100)/100;s+=";"+a+":-"+p+"px";var f=i+" solid "+r+"px;",v=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+f,"border-right:"+f,"background-color:"+e+";"];return'<div style="'+v.join("")+'"></div>'}function Cn(n,i){var t="cubic-bezier(0.23,1,0.32,1)",e=" "+n/2+"s "+t,r="opacity"+e+",visibility"+e;return i||(e=" "+n+"s "+t,r+=N.transformSupported?","+ke+e:",left"+e+",top"+e),wn+":"+r}function li(n,i,t){var e=n.toFixed(0)+"px",r=i.toFixed(0)+"px";if(!N.transformSupported)return t?"top:"+r+";left:"+e+";":[["top",r],["left",e]];var a=N.transform3dSupported,o="translate"+(a?"3d":"")+"("+e+","+r+(a?",0":"")+")";return t?"top:0;left:0;"+ke+":"+o+";":[["top",0],["left",0],[hr,o]]}function An(n){var i=[],t=n.get("fontSize"),e=n.getTextColor();e&&i.push("color:"+e),i.push("font:"+n.getFont()),t&&i.push("line-height:"+Math.round(t*3/2)+"px");var r=n.get("textShadowColor"),a=n.get("textShadowBlur")||0,o=n.get("textShadowOffsetX")||0,s=n.get("textShadowOffsetY")||0;return r&&a&&i.push("text-shadow:"+o+"px "+s+"px "+a+"px "+r),b(["decoration","align"],function(l){var u=n.get(l);u&&i.push("text-"+l+":"+u)}),i.join(";")}function Dn(n,i,t){var e=[],r=n.get("transitionDuration"),a=n.get("backgroundColor"),o=n.get("shadowBlur"),s=n.get("shadowColor"),l=n.get("shadowOffsetX"),u=n.get("shadowOffsetY"),h=n.getModel("textStyle"),c=Zi(n,"html"),d=l+"px "+u+"px "+o+"px "+s;return e.push("box-shadow:"+d),i&&r&&e.push(Cn(r,t)),a&&e.push("background-color:"+a),b(["width","color","radius"],function(p){var f="border-"+p,v=Fi(f),g=n.get(v);g!=null&&e.push(f+":"+g+(p==="color"?"":"px"))}),e.push(An(h)),c!=null&&e.push("padding:"+ne(c).join("px ")+"px"),e.join(";")+";"}function ui(n,i,t,e,r){var a=i&&i.painter;if(t){var o=a&&a.getViewportRoot();o&&Vr(n,o,t,e,r)}else{n[0]=e,n[1]=r;var s=a&&a.getViewportRootOffset();s&&(n[0]+=s.offsetLeft,n[1]+=s.offsetTop)}n[2]=n[0]/i.getWidth(),n[3]=n[1]/i.getHeight()}var Ln=function(){function n(i,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,N.wxa)return null;var e=document.createElement("div");e.domBelongToZr=!0,this.el=e;var r=this._zr=i.getZr(),a=t.appendTo,o=a&&(F(a)?document.querySelector(a):He(a)?a:H(a)&&a(i.getDom()));ui(this._styleCoord,r,o,i.getWidth()/2,i.getHeight()/2),(o||i.getDom()).appendChild(e),this._api=i,this._container=o;var s=this;e.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},e.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=r.handler,h=r.painter.getViewportRoot();Or(h,l,!0),u.dispatch("mousemove",l)}},e.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return n.prototype.update=function(i){if(!this._container){var t=this._api.getDom(),e=bn(t,"position"),r=t.style;r.position!=="absolute"&&e!=="absolute"&&(r.position="relative")}var a=i.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=i.get("className")||""},n.prototype.show=function(i,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el,r=e.style,a=this._styleCoord;e.innerHTML?r.cssText=Mn+Dn(i,!this._firstShow,this._longHide)+li(a[0],a[1],!0)+("border-color:"+Jt(t)+";")+(i.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):r.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(i,t,e,r,a){var o=this.el;if(i==null){o.innerHTML="";return}var s="";if(F(a)&&e.get("trigger")==="item"&&!lr(e)&&(s=Tn(e,r,a)),F(i))o.innerHTML=i+s;else if(i){o.innerHTML="",O(i)||(i=[i]);for(var l=0;l<i.length;l++)He(i[l])&&i[l].parentNode!==o&&o.appendChild(i[l]);if(s&&o.childNodes.length){var u=document.createElement("div");u.innerHTML=s,o.appendChild(u)}}},n.prototype.setEnterable=function(i){this._enterable=i},n.prototype.getSize=function(){var i=this.el;return[i.offsetWidth,i.offsetHeight]},n.prototype.moveTo=function(i,t){var e=this._styleCoord;if(ui(e,this._zr,this._container,i,t),e[0]!=null&&e[1]!=null){var r=this.el.style,a=li(e[0],e[1]);b(a,function(o){r[o[0]]=o[1]})}},n.prototype._moveIfResized=function(){var i=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(i*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){var i=this,t=this.el.style;t.visibility="hidden",t.opacity="0",N.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return i._longHide=!0},500)},n.prototype.hideLater=function(i){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(i?(this._hideDelay=i,this._show=!1,this._hideTimeout=setTimeout(L(this.hide,this),i)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i=this.el.parentNode;i&&i.removeChild(this.el),this.el=this._container=null},n}(),Rn=function(){function n(i){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=i.getZr(),ci(this._styleCoord,this._zr,i.getWidth()/2,i.getHeight()/2)}return n.prototype.update=function(i){var t=i.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(i,t,e,r,a){var o=this;ft(i)&&zr(""),this.el&&this._zr.remove(this.el);var s=e.getModel("textStyle");this.el=new Y({style:{rich:t.richTextStyles,text:i,lineHeight:22,borderWidth:1,borderColor:r,textShadowColor:s.get("textShadowColor"),fill:e.get(["textStyle","color"]),padding:Zi(e,"richText"),verticalAlign:"top",align:"left"},z:e.get("z")}),b(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){o.el.style[u]=e.get(u)}),b(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){o.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},n.prototype.setEnterable=function(i){this._enterable=i},n.prototype.getSize=function(){var i=this.el,t=this.el.getBoundingRect(),e=hi(i.style);return[t.width+e.left+e.right,t.height+e.top+e.bottom]},n.prototype.moveTo=function(i,t){var e=this.el;if(e){var r=this._styleCoord;ci(r,this._zr,i,t),i=r[0],t=r[1];var a=e.style,o=st(a.borderWidth||0),s=hi(a);e.x=i+o+s.left,e.y=t+o+s.top,e.markRedraw()}},n.prototype._moveIfResized=function(){var i=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(i*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(i){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(i?(this._hideDelay=i,this._show=!1,this._hideTimeout=setTimeout(L(this.hide,this),i)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function st(n){return Math.max(0,n)}function hi(n){var i=st(n.shadowBlur||0),t=st(n.shadowOffsetX||0),e=st(n.shadowOffsetY||0);return{left:st(i-t),right:st(i+t),top:st(i-e),bottom:st(i+e)}}function ci(n,i,t,e){n[0]=t,n[1]=e,n[2]=n[0]/i.getWidth(),n[3]=n[1]/i.getHeight()}var kn=new Q({shape:{x:-1,y:-1,width:2,height:2}}),Pn=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.init=function(t,e){if(!(N.node||!e.getDom())){var r=t.getComponent("tooltip"),a=this._renderMode=Er(r.get("renderMode"));this._tooltipContent=a==="richText"?new Rn(e):new Ln(e,{appendTo:r.get("appendToBody",!0)?"body":r.get("appendTo",!0)})}},i.prototype.render=function(t,e,r){if(!(N.node||!r.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=r;var a=this._tooltipContent;a.update(t),a.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?ae(this,"_updatePosition",50,"fixRate"):Qt(this,"_updatePosition")}},i.prototype._initGlobalListener=function(){var t=this._tooltipModel,e=t.get("triggerOn");ir("itemTooltip",this._api,L(function(r,a,o){e!=="none"&&(e.indexOf(r)>=0?this._tryShow(a,o):r==="leave"&&this._hide(o))},this))},i.prototype._keepShow=function(){var t=this._tooltipModel,e=this._ecModel,r=this._api,a=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!r.isDisposed()&&o.manuallyShowTip(t,e,r,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},i.prototype.manuallyShowTip=function(t,e,r,a){if(!(a.from===this.uid||N.node||!r.getDom())){var o=di(a,r);this._ticket="";var s=a.dataByCoordSys,l=En(a,e,r);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var h=kn;h.x=a.x,h.y=a.y,h.update(),G(h).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:h},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(t,e,r,a))return;var c=rr(a,e),d=c.point[0],p=c.point[1];d!=null&&p!=null&&this._tryShow({offsetX:d,offsetY:p,target:c.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(r.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:r.getZr().findHover(a.x,a.y).target},o))}},i.prototype.manuallyHideTip=function(t,e,r,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(di(a,r))},i.prototype._manuallyAxisShowTip=function(t,e,r,a){var o=a.seriesIndex,s=a.dataIndex,l=e.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var u=e.getSeriesByIndex(o);if(u){var h=u.getData(),c=kt([h.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(c.get("trigger")==="axis")return r.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},i.prototype._tryShow=function(t,e){var r=t.target,a=this._tooltipModel;if(a){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(r){var s=G(r);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,u;$i(r,function(h){if(G(h).dataIndex!=null)return l=h,!0;if(G(h).tooltipConfig!=null)return u=h,!0},!0),l?this._showSeriesItemTooltip(t,l,e):u?this._showComponentItemTooltip(t,u,e):this._hide(e)}else this._lastDataByCoordSys=null,this._hide(e)}},i.prototype._showOrMove=function(t,e){var r=t.get("showDelay");e=L(e,this),clearTimeout(this._showTimout),r>0?this._showTimout=setTimeout(e,r):e()},i.prototype._showAxisTooltip=function(t,e){var r=this._ecModel,a=this._tooltipModel,o=[e.offsetX,e.offsetY],s=kt([e.tooltipOption],a),l=this._renderMode,u=[],h=te("section",{blocks:[],noHeader:!0}),c=[],d=new oe;b(t,function(m){b(m.dataByAxis,function(_){var x=r.getComponent(_.axisDim+"Axis",_.axisIndex),S=_.value;if(!(!x||S==null)){var w=tr(S,x.axis,r,_.seriesDataIndices,_.valueLabelOpt),M=te("section",{header:w,noHeader:!Br(w),sortBlocks:!0,blocks:[]});h.blocks.push(M),b(_.seriesDataIndices,function(I){var D=r.getSeriesByIndex(I.seriesIndex),C=I.dataIndexInside,T=D.getDataParams(C);if(!(T.dataIndex<0)){T.axisDim=_.axisDim,T.axisIndex=_.axisIndex,T.axisType=_.axisType,T.axisId=_.axisId,T.axisValue=Wi(x.axis,{value:S}),T.axisValueLabel=w,T.marker=d.makeTooltipMarker("item",Jt(T.color),l);var A=Ge(D.formatTooltip(C,!0,null)),V=A.frag;if(V){var R=kt([D],a).get("valueFormatter");M.blocks.push(R?X({valueFormatter:R},V):V)}A.text&&c.push(A.text),u.push(T)}})}})}),h.blocks.reverse(),c.reverse();var p=e.position,f=s.get("order"),v=Ne(h,d,l,f,r.get("useUTC"),s.get("textStyle"));v&&c.unshift(v);var g=l==="richText"?`

`:"<br/>",y=c.join(g);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(t,u)?this._updatePosition(s,p,o[0],o[1],this._tooltipContent,u):this._showTooltipContent(s,y,u,Math.random()+"",o[0],o[1],p,null,d)})},i.prototype._showSeriesItemTooltip=function(t,e,r){var a=this._ecModel,o=G(e),s=o.seriesIndex,l=a.getSeriesByIndex(s),u=o.dataModel||l,h=o.dataIndex,c=o.dataType,d=u.getData(c),p=this._renderMode,f=t.positionDefault,v=kt([d.getItemModel(h),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,f?{position:f}:null),g=v.get("trigger");if(!(g!=null&&g!=="item")){var y=u.getDataParams(h,c),m=new oe;y.marker=m.makeTooltipMarker("item",Jt(y.color),p);var _=Ge(u.formatTooltip(h,!1,c)),x=v.get("order"),S=v.get("valueFormatter"),w=_.frag,M=w?Ne(S?X({valueFormatter:S},w):w,m,p,x,a.get("useUTC"),v.get("textStyle")):_.text,I="item_"+u.name+"_"+h;this._showOrMove(v,function(){this._showTooltipContent(v,M,y,I,t.offsetX,t.offsetY,t.position,t.target,m)}),r({type:"showTip",dataIndexInside:h,dataIndex:d.getRawIndex(h),seriesIndex:s,from:this.uid})}},i.prototype._showComponentItemTooltip=function(t,e,r){var a=G(e),o=a.tooltipConfig,s=o.option||{};if(F(s)){var l=s;s={content:l,formatter:l}}var u=[s],h=this._ecModel.getComponent(a.componentMainType,a.componentIndex);h&&u.push(h),u.push({formatter:s.content});var c=t.positionDefault,d=kt(u,this._tooltipModel,c?{position:c}:null),p=d.get("content"),f=Math.random()+"",v=new oe;this._showOrMove(d,function(){var g=W(d.get("formatterParams")||{});this._showTooltipContent(d,p,g,f,t.offsetX,t.offsetY,t.position,e,v)}),r({type:"showTip",from:this.uid})},i.prototype._showTooltipContent=function(t,e,r,a,o,s,l,u,h){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var c=this._tooltipContent;c.setEnterable(t.get("enterable"));var d=t.get("formatter");l=l||t.get("position");var p=e,f=this._getNearestPoint([o,s],r,t.get("trigger"),t.get("borderColor")),v=f.color;if(d)if(F(d)){var g=t.ecModel.get("useUTC"),y=O(r)?r[0]:r,m=y&&y.axisType&&y.axisType.indexOf("time")>=0;p=d,m&&(p=Hr(y.axisValue,p,g)),p=Gr(p,r,!0)}else if(H(d)){var _=L(function(x,S){x===this._ticket&&(c.setContent(S,h,t,v,l),this._updatePosition(t,l,o,s,c,r,u))},this);this._ticket=a,p=d(r,a,_)}else p=d;c.setContent(p,h,t,v,l),c.show(t,v),this._updatePosition(t,l,o,s,c,r,u)}},i.prototype._getNearestPoint=function(t,e,r,a){if(r==="axis"||O(e))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!O(e))return{color:a||e.color||e.borderColor}},i.prototype._updatePosition=function(t,e,r,a,o,s,l){var u=this._api.getWidth(),h=this._api.getHeight();e=e||t.get("position");var c=o.getSize(),d=t.get("align"),p=t.get("verticalAlign"),f=l&&l.getBoundingRect().clone();if(l&&f.applyTransform(l.transform),H(e)&&(e=e([r,a],s,o.el,f,{viewSize:[u,h],contentSize:c.slice()})),O(e))r=ht(e[0],u),a=ht(e[1],h);else if(ft(e)){var v=e;v.width=c[0],v.height=c[1];var g=Dt(v,{width:u,height:h});r=g.x,a=g.y,d=null,p=null}else if(F(e)&&l){var y=zn(e,f,c,t.get("borderWidth"));r=y[0],a=y[1]}else{var y=On(r,a,o,u,h,d?null:20,p?null:20);r=y[0],a=y[1]}if(d&&(r-=pi(d)?c[0]/2:d==="right"?c[0]:0),p&&(a-=pi(p)?c[1]/2:p==="bottom"?c[1]:0),lr(t)){var y=Vn(r,a,o,u,h);r=y[0],a=y[1]}o.moveTo(r,a)},i.prototype._updateContentNotChangedOnAxis=function(t,e){var r=this._lastDataByCoordSys,a=this._cbParamsList,o=!!r&&r.length===t.length;return o&&b(r,function(s,l){var u=s.dataByAxis||[],h=t[l]||{},c=h.dataByAxis||[];o=o&&u.length===c.length,o&&b(u,function(d,p){var f=c[p]||{},v=d.seriesDataIndices||[],g=f.seriesDataIndices||[];o=o&&d.value===f.value&&d.axisType===f.axisType&&d.axisId===f.axisId&&v.length===g.length,o&&b(v,function(y,m){var _=g[m];o=o&&y.seriesIndex===_.seriesIndex&&y.dataIndex===_.dataIndex}),a&&b(d.seriesDataIndices,function(y){var m=y.seriesIndex,_=e[m],x=a[m];_&&x&&x.data!==_.data&&(o=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=e,!!o},i.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},i.prototype.dispose=function(t,e){N.node||!e.getDom()||(Qt(this,"_updatePosition"),this._tooltipContent.dispose(),we("itemTooltip",e))},i.type="tooltip",i}(_t);function kt(n,i,t){var e=i.ecModel,r;t?(r=new zt(t,e,e),r=new zt(i.option,r,e)):r=i;for(var a=n.length-1;a>=0;a--){var o=n[a];o&&(o instanceof zt&&(o=o.get("tooltip",!0)),F(o)&&(o={formatter:o}),o&&(r=new zt(o,r,e)))}return r}function di(n,i){return n.dispatchAction||L(i.dispatchAction,i)}function On(n,i,t,e,r,a,o){var s=t.getSize(),l=s[0],u=s[1];return a!=null&&(n+l+a+2>e?n-=l+a:n+=a),o!=null&&(i+u+o>r?i-=u+o:i+=o),[n,i]}function Vn(n,i,t,e,r){var a=t.getSize(),o=a[0],s=a[1];return n=Math.min(n+o,e)-o,i=Math.min(i+s,r)-s,n=Math.max(n,0),i=Math.max(i,0),[n,i]}function zn(n,i,t,e){var r=t[0],a=t[1],o=Math.ceil(Math.SQRT2*e)+8,s=0,l=0,u=i.width,h=i.height;switch(n){case"inside":s=i.x+u/2-r/2,l=i.y+h/2-a/2;break;case"top":s=i.x+u/2-r/2,l=i.y-a-o;break;case"bottom":s=i.x+u/2-r/2,l=i.y+h+o;break;case"left":s=i.x-r-o,l=i.y+h/2-a/2;break;case"right":s=i.x+u+o,l=i.y+h/2-a/2}return[s,l]}function pi(n){return n==="center"||n==="middle"}function En(n,i,t){var e=Nr(n).queryOptionMap,r=e.keys()[0];if(!(!r||r==="series")){var a=Wr(i,r,e.get(r),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=t.getViewOfComponentModel(o),l;if(s.group.traverse(function(u){var h=G(u).tooltipConfig;if(h&&h.name===n.name)return l=u,!0}),l)return{componentMainType:r,componentIndex:o.componentIndex,el:l}}}}function Bn(n){J(ar),n.registerComponentModel(xn),n.registerComponentView(Pn),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},We),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},We)}var fi=b;function vi(n){if(n){for(var i in n)if(n.hasOwnProperty(i))return!0}}function gi(n,i,t){var e={};return fi(i,function(a){var o=e[a]=r();fi(n[a],function(s,l){if(Z.isValidType(l)){var u={type:l,visual:s};t&&t(u,a),o[l]=new Z(u),l==="opacity"&&(u=W(u),u.type="colorAlpha",o.__hidden.__alphaForOpacity=new Z(u))}})}),e;function r(){var a=function(){};a.prototype.__hidden=a.prototype;var o=new a;return o}}function Hn(n,i,t){var e;b(t,function(r){i.hasOwnProperty(r)&&vi(i[r])&&(e=!0)}),e&&b(t,function(r){i.hasOwnProperty(r)&&vi(i[r])?n[r]=W(i[r]):delete n[r]})}function Gn(n,i,t,e){var r={};return b(n,function(a){var o=Z.prepareVisualTypes(i[a]);r[a]=o}),{progress:function(o,s){var l;e!=null&&(l=s.getDimensionIndex(e));function u(S){return Fr(s,c,S)}function h(S,w){Zr(s,c,S,w)}for(var c,d=s.getStore();(c=o.next())!=null;){var p=s.getRawDataItem(c);if(!(p&&p.visualMap===!1))for(var f=e!=null?d.get(l,c):c,v=t(f),g=i[v],y=r[v],m=0,_=y.length;m<_;m++){var x=y[m];g[x]&&g[x].applyVisual(f,u,h)}}}}}var Nn=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t.layoutMode={type:"box",ignoreSize:!0},t}return i.type="title",i.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},i}(mt),Wn=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.render=function(t,e,r){if(this.group.removeAll(),!!t.get("show")){var a=this.group,o=t.getModel("textStyle"),s=t.getModel("subtextStyle"),l=t.get("textAlign"),u=It(t.get("textBaseline"),t.get("textVerticalAlign")),h=new Y({style:at(o,{text:t.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),c=h.getBoundingRect(),d=t.get("subtext"),p=new Y({style:at(s,{text:d,fill:s.getTextColor(),y:c.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),f=t.get("link"),v=t.get("sublink"),g=t.get("triggerEvent",!0);h.silent=!f&&!g,p.silent=!v&&!g,f&&h.on("click",function(){Fe(f,"_"+t.get("target"))}),v&&p.on("click",function(){Fe(v,"_"+t.get("subtarget"))}),G(h).eventData=G(p).eventData=g?{componentType:"title",componentIndex:t.componentIndex}:null,a.add(h),d&&a.add(p);var y=a.getBoundingRect(),m=t.getBoxLayoutParams();m.width=y.width,m.height=y.height;var _=Dt(m,{width:r.getWidth(),height:r.getHeight()},t.get("padding"));l||(l=t.get("left")||t.get("right"),l==="middle"&&(l="center"),l==="right"?_.x+=_.width:l==="center"&&(_.x+=_.width/2)),u||(u=t.get("top")||t.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?_.y+=_.height:u==="middle"&&(_.y+=_.height/2),u=u||"top"),a.x=_.x,a.y=_.y,a.markRedraw();var x={align:l,verticalAlign:u};h.setStyle(x),p.setStyle(x),y=a.getBoundingRect();var S=_.margin,w=t.getItemStyle(["color","opacity"]);w.fill=t.get("backgroundColor");var M=new Q({shape:{x:y.x-S[3],y:y.y-S[0],width:y.width+S[1]+S[3],height:y.height+S[0]+S[2],r:t.get("borderRadius")},style:w,subPixelOptimize:!0,silent:!0});a.add(M)}},i.type="title",i}(_t);function Fn(n){n.registerComponentModel(Nn),n.registerComponentView(Wn)}function dr(n,i){if(!n)return!1;for(var t=O(n)?n:[n],e=0;e<t.length;e++)if(t[e]&&t[e][i])return!0;return!1}function Wt(n){Xr(n,"label",["show"])}var Ft=yt(),gt=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t.createdBySelf=!1,t}return i.prototype.init=function(t,e,r){this.mergeDefaultAndTheme(t,r),this._mergeOption(t,r,!1,!0)},i.prototype.isAnimationEnabled=function(){if(N.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},i.prototype.mergeOption=function(t,e){this._mergeOption(t,e,!1,!1)},i.prototype._mergeOption=function(t,e,r,a){var o=this.mainType;r||e.eachSeries(function(s){var l=s.get(this.mainType,!0),u=Ft(s)[o];if(!l||!l.data){Ft(s)[o]=null;return}u?u._mergeOption(l,e,!0):(a&&Wt(l),b(l.data,function(h){h instanceof Array?(Wt(h[0]),Wt(h[1])):Wt(h)}),u=this.createMarkerModelFromSeries(l,this,e),X(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),Ft(s)[o]=u},this)},i.prototype.formatTooltip=function(t,e,r){var a=this.getData(),o=this.getRawValue(t),s=a.getName(t);return te("section",{header:this.name,blocks:[te("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},i.prototype.getData=function(){return this._data},i.prototype.setData=function(t){this._data=t},i.getMarkerModelFromSeries=function(t,e){return Ft(t)[e]},i.type="marker",i.dependencies=["series","grid","polar","geo"],i}(mt);$r(gt,Yr.prototype);var Zn=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.createMarkerModelFromSeries=function(t,e,r){return new i(t,e,r)},i.type="markPoint",i.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},i}(gt);function $n(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}function Yn(n){return!isNaN(parseFloat(n.x))&&!isNaN(parseFloat(n.y))}function Zt(n,i,t,e,r,a){var o=[],s=Ur(i,e),l=s?i.getCalculationInfo("stackResultDimension"):e,u=Pe(i,l,n),h=i.indicesOfNearest(l,u)[0];o[r]=i.get(t,h),o[a]=i.get(l,h);var c=i.get(e,h),d=Kr(i.get(e,h));return d=Math.min(d,20),d>=0&&(o[a]=+o[a].toFixed(d)),[o,c]}var he={min:z(Zt,"min"),max:z(Zt,"max"),average:z(Zt,"average"),median:z(Zt,"median")};function Me(n,i){if(i){var t=n.getData(),e=n.coordinateSystem,r=e&&e.dimensions;if(!Yn(i)&&!O(i.coord)&&O(r)){var a=pr(i,t,e,n);if(i=W(i),i.type&&he[i.type]&&a.baseAxis&&a.valueAxis){var o=vt(r,a.baseAxis.dim),s=vt(r,a.valueAxis.dim),l=he[i.type](t,a.baseDataDim,a.valueDataDim,o,s);i.coord=l[0],i.value=l[1]}else i.coord=[i.xAxis!=null?i.xAxis:i.radiusAxis,i.yAxis!=null?i.yAxis:i.angleAxis]}if(i.coord==null||!O(r))i.coord=[];else for(var u=i.coord,h=0;h<2;h++)he[u[h]]&&(u[h]=Pe(t,t.mapDimension(r[h]),u[h]));return i}}function pr(n,i,t,e){var r={};return n.valueIndex!=null||n.valueDim!=null?(r.valueDataDim=n.valueIndex!=null?i.getDimension(n.valueIndex):n.valueDim,r.valueAxis=t.getAxis(Xn(e,r.valueDataDim)),r.baseAxis=t.getOtherAxis(r.valueAxis),r.baseDataDim=i.mapDimension(r.baseAxis.dim)):(r.baseAxis=e.getBaseAxis(),r.valueAxis=t.getOtherAxis(r.baseAxis),r.baseDataDim=i.mapDimension(r.baseAxis.dim),r.valueDataDim=i.mapDimension(r.valueAxis.dim)),r}function Xn(n,i){var t=n.getData().getDimensionInfo(i);return t&&t.coordDim}function Ie(n,i){return n&&n.containData&&i.coord&&!$n(i)?n.containData(i.coord):!0}function fr(n,i){return n?function(t,e,r,a){var o=a<2?t.coord&&t.coord[a]:t.value;return Ze(o,i[a])}:function(t,e,r,a){return Ze(t.value,i[a])}}function Pe(n,i,t){if(t==="average"){var e=0,r=0;return n.each(i,function(a,o){isNaN(a)||(e+=a,r++)}),e/r}else return t==="median"?n.getMedian(i):n.getDataExtent(i)[t==="max"?1:0]}var ce=yt(),vr=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.init=function(){this.markerGroupMap=it()},i.prototype.render=function(t,e,r){var a=this,o=this.markerGroupMap;o.each(function(s){ce(s).keep=!1}),e.eachSeries(function(s){var l=gt.getMarkerModelFromSeries(s,a.type);l&&a.renderSeries(s,l,e,r)}),o.each(function(s){!ce(s).keep&&a.group.remove(s.group)})},i.prototype.markKeep=function(t){ce(t).keep=!0},i.prototype.toggleBlurSeries=function(t,e){var r=this;b(t,function(a){var o=gt.getMarkerModelFromSeries(a,r.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(l){l&&(e?jr(l):qr(l))})}})},i.type="marker",i}(_t);function yi(n,i,t){var e=i.coordinateSystem;n.each(function(r){var a=n.getItemModel(r),o,s=ht(a.get("x"),t.getWidth()),l=ht(a.get("y"),t.getHeight());if(!isNaN(s)&&!isNaN(l))o=[s,l];else if(i.getMarkerPosition)o=i.getMarkerPosition(n.getValues(n.dimensions,r));else if(e){var u=n.get(e.dimensions[0],r),h=n.get(e.dimensions[1],r);o=e.dataToPoint([u,h])}isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),n.setItemLayout(r,o)})}var Un=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.updateTransform=function(t,e,r){e.eachSeries(function(a){var o=gt.getMarkerModelFromSeries(a,"markPoint");o&&(yi(o.getData(),a,r),this.markerGroupMap.get(a.id).updateLayout())},this)},i.prototype.renderSeries=function(t,e,r,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),u=this.markerGroupMap,h=u.get(s)||u.set(s,new Pa),c=Kn(o,t,e);e.setData(c),yi(e.getData(),t,a),c.each(function(d){var p=c.getItemModel(d),f=p.getShallow("symbol"),v=p.getShallow("symbolSize"),g=p.getShallow("symbolRotate"),y=p.getShallow("symbolOffset"),m=p.getShallow("symbolKeepAspect");if(H(f)||H(v)||H(g)||H(y)){var _=e.getRawValue(d),x=e.getDataParams(d);H(f)&&(f=f(_,x)),H(v)&&(v=v(_,x)),H(g)&&(g=g(_,x)),H(y)&&(y=y(_,x))}var S=p.getModel("itemStyle").getItemStyle(),w=Le(l,"color");S.fill||(S.fill=w),c.setItemVisual(d,{symbol:f,symbolSize:v,symbolRotate:g,symbolOffset:y,symbolKeepAspect:m,style:S})}),h.updateData(c),this.group.add(h.group),c.eachItemGraphicEl(function(d){d.traverse(function(p){G(p).dataModel=e})}),this.markKeep(h),h.group.silent=e.get("silent")||t.get("silent")},i.type="markPoint",i}(vr);function Kn(n,i,t){var e;n?e=K(n&&n.dimensions,function(s){var l=i.getData().getDimensionInfo(i.getData().mapDimension(s))||{};return X(X({},l),{name:s,ordinalMeta:null})}):e=[{name:"value",type:"float"}];var r=new Ut(e,t),a=K(t.get("data"),z(Me,i));n&&(a=Re(a,z(Ie,n)));var o=fr(!!n,e);return r.initData(a,null,o),r}function jn(n){n.registerComponentModel(Zn),n.registerComponentView(Un),n.registerPreprocessor(function(i){dr(i.series,"markPoint")&&(i.markPoint=i.markPoint||{})})}var qn=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.createMarkerModelFromSeries=function(t,e,r){return new i(t,e,r)},i.type="markLine",i.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},i}(gt),$t=yt(),Qn=function(n,i,t,e){var r=n.getData(),a;if(O(e))a=e;else{var o=e.type;if(o==="min"||o==="max"||o==="average"||o==="median"||e.xAxis!=null||e.yAxis!=null){var s=void 0,l=void 0;if(e.yAxis!=null||e.xAxis!=null)s=i.getAxis(e.yAxis!=null?"y":"x"),l=Yi(e.yAxis,e.xAxis);else{var u=pr(e,r,i,n);s=u.valueAxis;var h=Qr(r,u.valueDataDim);l=Pe(r,h,o)}var c=s.dim==="x"?0:1,d=1-c,p=W(e),f={coord:[]};p.type=null,p.coord=[],p.coord[d]=-1/0,f.coord[d]=1/0;var v=t.get("precision");v>=0&&Xi(l)&&(l=+l.toFixed(Math.min(v,20))),p.coord[c]=f.coord[c]=l,a=[p,f,{type:o,valueIndex:e.valueIndex,value:l}]}else a=[]}var g=[Me(n,a[0]),Me(n,a[1]),X({},a[2])];return g[2].type=g[2].type||null,q(g[2],g[0]),q(g[2],g[1]),g};function ie(n){return!isNaN(n)&&!isFinite(n)}function mi(n,i,t,e){var r=1-n,a=e.dimensions[n];return ie(i[r])&&ie(t[r])&&i[n]===t[n]&&e.getAxis(a).containData(i[n])}function Jn(n,i){if(n.type==="cartesian2d"){var t=i[0].coord,e=i[1].coord;if(t&&e&&(mi(1,t,e,n)||mi(0,t,e,n)))return!0}return Ie(n,i[0])&&Ie(n,i[1])}function de(n,i,t,e,r){var a=e.coordinateSystem,o=n.getItemModel(i),s,l=ht(o.get("x"),r.getWidth()),u=ht(o.get("y"),r.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(e.getMarkerPosition)s=e.getMarkerPosition(n.getValues(n.dimensions,i));else{var h=a.dimensions,c=n.get(h[0],i),d=n.get(h[1],i);s=a.dataToPoint([c,d])}if(Va(a,"cartesian2d")){var p=a.getAxis("x"),f=a.getAxis("y"),h=a.dimensions;ie(n.get(h[0],i))?s[0]=p.toGlobalCoord(p.getExtent()[t?0:1]):ie(n.get(h[1],i))&&(s[1]=f.toGlobalCoord(f.getExtent()[t?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}n.setItemLayout(i,s)}var to=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.updateTransform=function(t,e,r){e.eachSeries(function(a){var o=gt.getMarkerModelFromSeries(a,"markLine");if(o){var s=o.getData(),l=$t(o).from,u=$t(o).to;l.each(function(h){de(l,h,!0,a,r),de(u,h,!1,a,r)}),s.each(function(h){s.setItemLayout(h,[l.getItemLayout(h),u.getItemLayout(h)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},i.prototype.renderSeries=function(t,e,r,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),u=this.markerGroupMap,h=u.get(s)||u.set(s,new Oa);this.group.add(h.group);var c=eo(o,t,e),d=c.from,p=c.to,f=c.line;$t(e).from=d,$t(e).to=p,e.setData(f);var v=e.get("symbol"),g=e.get("symbolSize"),y=e.get("symbolRotate"),m=e.get("symbolOffset");O(v)||(v=[v,v]),O(g)||(g=[g,g]),O(y)||(y=[y,y]),O(m)||(m=[m,m]),c.from.each(function(x){_(d,x,!0),_(p,x,!1)}),f.each(function(x){var S=f.getItemModel(x).getModel("lineStyle").getLineStyle();f.setItemLayout(x,[d.getItemLayout(x),p.getItemLayout(x)]),S.stroke==null&&(S.stroke=d.getItemVisual(x,"style").fill),f.setItemVisual(x,{fromSymbolKeepAspect:d.getItemVisual(x,"symbolKeepAspect"),fromSymbolOffset:d.getItemVisual(x,"symbolOffset"),fromSymbolRotate:d.getItemVisual(x,"symbolRotate"),fromSymbolSize:d.getItemVisual(x,"symbolSize"),fromSymbol:d.getItemVisual(x,"symbol"),toSymbolKeepAspect:p.getItemVisual(x,"symbolKeepAspect"),toSymbolOffset:p.getItemVisual(x,"symbolOffset"),toSymbolRotate:p.getItemVisual(x,"symbolRotate"),toSymbolSize:p.getItemVisual(x,"symbolSize"),toSymbol:p.getItemVisual(x,"symbol"),style:S})}),h.updateData(f),c.line.eachItemGraphicEl(function(x){G(x).dataModel=e,x.traverse(function(S){G(S).dataModel=e})});function _(x,S,w){var M=x.getItemModel(S);de(x,S,w,t,a);var I=M.getModel("itemStyle").getItemStyle();I.fill==null&&(I.fill=Le(l,"color")),x.setItemVisual(S,{symbolKeepAspect:M.get("symbolKeepAspect"),symbolOffset:It(M.get("symbolOffset",!0),m[w?0:1]),symbolRotate:It(M.get("symbolRotate",!0),y[w?0:1]),symbolSize:It(M.get("symbolSize"),g[w?0:1]),symbol:It(M.get("symbol",!0),v[w?0:1]),style:I})}this.markKeep(h),h.group.silent=e.get("silent")||t.get("silent")},i.type="markLine",i}(vr);function eo(n,i,t){var e;n?e=K(n&&n.dimensions,function(u){var h=i.getData().getDimensionInfo(i.getData().mapDimension(u))||{};return X(X({},h),{name:u,ordinalMeta:null})}):e=[{name:"value",type:"float"}];var r=new Ut(e,t),a=new Ut(e,t),o=new Ut([],t),s=K(t.get("data"),z(Qn,i,n,t));n&&(s=Re(s,z(Jn,n)));var l=fr(!!n,e);return r.initData(K(s,function(u){return u[0]}),null,l),a.initData(K(s,function(u){return u[1]}),null,l),o.initData(K(s,function(u){return u[2]})),o.hasItemOption=!0,{from:r,to:a,line:o}}function io(n){n.registerComponentModel(qn),n.registerComponentView(to),n.registerPreprocessor(function(i){dr(i.series,"markLine")&&(i.markLine=i.markLine||{})})}var ro=function(n,i){if(i==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(i==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},Te=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t.layoutMode={type:"box",ignoreSize:!0},t}return i.prototype.init=function(t,e,r){this.mergeDefaultAndTheme(t,r),t.selected=t.selected||{},this._updateSelector(t)},i.prototype.mergeOption=function(t,e){n.prototype.mergeOption.call(this,t,e),this._updateSelector(t)},i.prototype._updateSelector=function(t){var e=t.selector,r=this.ecModel;e===!0&&(e=t.selector=["all","inverse"]),O(e)&&b(e,function(a,o){F(a)&&(a={type:a}),e[o]=q(a,ro(r,a.type))})},i.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var e=!1,r=0;r<t.length;r++){var a=t[r].get("name");if(this.isSelected(a)){this.select(a),e=!0;break}}!e&&this.select(t[0].get("name"))}},i.prototype._updateData=function(t){var e=[],r=[];t.eachRawSeries(function(l){var u=l.name;r.push(u);var h;if(l.legendVisualProvider){var c=l.legendVisualProvider,d=c.getAllNames();t.isSeriesFiltered(l)||(r=r.concat(d)),d.length?e=e.concat(d):h=!0}else h=!0;h&&Jr(l)&&e.push(l.name)}),this._availableNames=r;var a=this.get("data")||e,o=it(),s=K(a,function(l){return(F(l)||Xi(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new zt(l,this,this.ecModel))},this);this._data=Re(s,function(l){return!!l})},i.prototype.getData=function(){return this._data},i.prototype.select=function(t){var e=this.option.selected,r=this.get("selectedMode");if(r==="single"){var a=this._data;b(a,function(o){e[o.get("name")]=!1})}e[t]=!0},i.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},i.prototype.toggleSelected=function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},i.prototype.allSelect=function(){var t=this._data,e=this.option.selected;b(t,function(r){e[r.get("name",!0)]=!0})},i.prototype.inverseSelect=function(){var t=this._data,e=this.option.selected;b(t,function(r){var a=r.get("name",!0);e.hasOwnProperty(a)||(e[a]=!0),e[a]=!e[a]})},i.prototype.isSelected=function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&vt(this._availableNames,t)>=0},i.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},i.type="legend.plain",i.dependencies=["series"],i.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},i}(mt),bt=z,Ce=b,Yt=nt,gr=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t.newlineDisabled=!1,t}return i.prototype.init=function(){this.group.add(this._contentGroup=new Yt),this.group.add(this._selectorGroup=new Yt),this._isFirstRender=!0},i.prototype.getContentGroup=function(){return this._contentGroup},i.prototype.getSelectorGroup=function(){return this._selectorGroup},i.prototype.render=function(t,e,r){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var o=t.get("align"),s=t.get("orient");(!o||o==="auto")&&(o=t.get("left")==="right"&&s==="vertical"?"right":"left");var l=t.get("selector",!0),u=t.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(o,t,e,r,l,s,u);var h=t.getBoxLayoutParams(),c={width:r.getWidth(),height:r.getHeight()},d=t.get("padding"),p=Dt(h,c,d),f=this.layoutInner(t,o,p,a,l,u),v=Dt(ta({width:f.width,height:f.height},h),c,d);this.group.x=v.x-f.x,this.group.y=v.y-f.y,this.group.markRedraw(),this.group.add(this._backgroundEl=_n(f,t))}},i.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},i.prototype.renderInner=function(t,e,r,a,o,s,l){var u=this.getContentGroup(),h=it(),c=e.get("selectedMode"),d=[];r.eachRawSeries(function(p){!p.get("legendHoverLink")&&d.push(p.id)}),Ce(e.getData(),function(p,f){var v=p.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var g=new Yt;g.newline=!0,u.add(g);return}var y=r.getSeriesByName(v)[0];if(!h.get(v))if(y){var m=y.getData(),_=m.getVisual("legendLineStyle")||{},x=m.getVisual("legendIcon"),S=m.getVisual("style"),w=this._createItem(y,v,f,p,e,t,_,S,x,c,a);w.on("click",bt(_i,v,null,a,d)).on("mouseover",bt(Ae,y.name,null,a,d)).on("mouseout",bt(De,y.name,null,a,d)),r.ssr&&w.eachChild(function(M){var I=G(M);I.seriesIndex=y.seriesIndex,I.dataIndex=f,I.ssrType="legend"}),h.set(v,!0)}else r.eachRawSeries(function(M){if(!h.get(v)&&M.legendVisualProvider){var I=M.legendVisualProvider;if(!I.containName(v))return;var D=I.indexOfName(v),C=I.getItemVisual(D,"style"),T=I.getItemVisual(D,"legendIcon"),A=ea(C.fill);A&&A[3]===0&&(A[3]=.2,C=X(X({},C),{fill:ia(A,"rgba")}));var V=this._createItem(M,v,f,p,e,t,{},C,T,c,a);V.on("click",bt(_i,null,v,a,d)).on("mouseover",bt(Ae,null,v,a,d)).on("mouseout",bt(De,null,v,a,d)),r.ssr&&V.eachChild(function(R){var k=G(R);k.seriesIndex=M.seriesIndex,k.dataIndex=f,k.ssrType="legend"}),h.set(v,!0)}},this)},this),o&&this._createSelector(o,e,a,s,l)},i.prototype._createSelector=function(t,e,r,a,o){var s=this.getSelectorGroup();Ce(t,function(u){var h=u.type,c=new Y({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){r.dispatchAction({type:h==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(c);var d=e.getModel("selectorLabel"),p=e.getModel(["emphasis","selectorLabel"]);ra(c,{normal:d,emphasis:p},{defaultText:u.title}),Se(c)})},i.prototype._createItem=function(t,e,r,a,o,s,l,u,h,c,d){var p=t.visualDrawType,f=o.get("itemWidth"),v=o.get("itemHeight"),g=o.isSelected(e),y=a.get("symbolRotate"),m=a.get("symbolKeepAspect"),_=a.get("icon");h=_||h||"roundRect";var x=ao(h,a,l,u,p,g,d),S=new Yt,w=a.getModel("textStyle");if(H(t.getLegendIcon)&&(!_||_==="inherit"))S.add(t.getLegendIcon({itemWidth:f,itemHeight:v,icon:h,iconRotate:y,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:m}));else{var M=_==="inherit"&&t.getData().getVisual("symbol")?y==="inherit"?t.getData().getVisual("symbolRotate"):y:0;S.add(no({itemWidth:f,itemHeight:v,icon:h,iconRotate:M,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:m}))}var I=s==="left"?f+5:-5,D=s,C=o.get("formatter"),T=e;F(C)&&C?T=C.replace("{name}",e??""):H(C)&&(T=C(e));var A=g?w.getTextColor():a.get("inactiveColor");S.add(new Y({style:at(w,{text:T,x:I,y:v/2,fill:A,align:D,verticalAlign:"middle"},{inheritColor:A})}));var V=new Q({shape:S.getBoundingRect(),style:{fill:"transparent"}}),R=a.getModel("tooltip");return R.get("show")&&aa({el:V,componentModel:o,itemName:e,itemTooltipOption:R.option}),S.add(V),S.eachChild(function(k){k.silent=!0}),V.silent=!c,this.getContentGroup().add(S),Se(S),S.__legendDataIndex=r,S},i.prototype.layoutInner=function(t,e,r,a,o,s){var l=this.getContentGroup(),u=this.getSelectorGroup();Ct(t.get("orient"),l,t.get("itemGap"),r.width,r.height);var h=l.getBoundingRect(),c=[-h.x,-h.y];if(u.markRedraw(),l.markRedraw(),o){Ct("horizontal",u,t.get("selectorItemGap",!0));var d=u.getBoundingRect(),p=[-d.x,-d.y],f=t.get("selectorButtonGap",!0),v=t.getOrient().index,g=v===0?"width":"height",y=v===0?"height":"width",m=v===0?"y":"x";s==="end"?p[v]+=h[g]+f:c[v]+=d[g]+f,p[1-v]+=h[y]/2-d[y]/2,u.x=p[0],u.y=p[1],l.x=c[0],l.y=c[1];var _={x:0,y:0};return _[g]=h[g]+f+d[g],_[y]=Math.max(h[y],d[y]),_[m]=Math.min(0,d[m]+p[1-v]),_}else return l.x=c[0],l.y=c[1],this.group.getBoundingRect()},i.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},i.type="legend.plain",i}(_t);function ao(n,i,t,e,r,a,o){function s(g,y){g.lineWidth==="auto"&&(g.lineWidth=y.lineWidth>0?2:0),Ce(g,function(m,_){g[_]==="inherit"&&(g[_]=y[_])})}var l=i.getModel("itemStyle"),u=l.getItemStyle(),h=n.lastIndexOf("empty",0)===0?"fill":"stroke",c=l.getShallow("decal");u.decal=!c||c==="inherit"?e.decal:na(c,o),u.fill==="inherit"&&(u.fill=e[r]),u.stroke==="inherit"&&(u.stroke=e[h]),u.opacity==="inherit"&&(u.opacity=(r==="fill"?e:t).opacity),s(u,e);var d=i.getModel("lineStyle"),p=d.getLineStyle();if(s(p,t),u.fill==="auto"&&(u.fill=e.fill),u.stroke==="auto"&&(u.stroke=e.fill),p.stroke==="auto"&&(p.stroke=e.fill),!a){var f=i.get("inactiveBorderWidth"),v=u[h];u.lineWidth=f==="auto"?e.lineWidth>0&&v?2:0:u.lineWidth,u.fill=i.get("inactiveColor"),u.stroke=i.get("inactiveBorderColor"),p.stroke=d.get("inactiveColor"),p.lineWidth=d.get("inactiveWidth")}return{itemStyle:u,lineStyle:p}}function no(n){var i=n.icon||"roundRect",t=Lt(i,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return t.setStyle(n.itemStyle),t.rotation=(n.iconRotate||0)*Math.PI/180,t.setOrigin([n.itemWidth/2,n.itemHeight/2]),i.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function _i(n,i,t,e){De(n,i,t,e),t.dispatchAction({type:"legendToggleSelect",name:n??i}),Ae(n,i,t,e)}function yr(n){for(var i=n.getZr().storage.getDisplayList(),t,e=0,r=i.length;e<r&&!(t=i[e].states.emphasis);)e++;return t&&t.hoverLayer}function Ae(n,i,t,e){yr(t)||t.dispatchAction({type:"highlight",seriesName:n,name:i,excludeSeriesId:e})}function De(n,i,t,e){yr(t)||t.dispatchAction({type:"downplay",seriesName:n,name:i,excludeSeriesId:e})}function oo(n){var i=n.findComponents({mainType:"legend"});i&&i.length&&n.filterSeries(function(t){for(var e=0;e<i.length;e++)if(!i[e].isSelected(t.name))return!1;return!0})}function Pt(n,i,t){var e={},r=n==="toggleSelected",a;return t.eachComponent("legend",function(o){r&&a!=null?o[a?"select":"unSelect"](i.name):n==="allSelect"||n==="inverseSelect"?o[n]():(o[n](i.name),a=o.isSelected(i.name));var s=o.getData();b(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var h=o.isSelected(u);e.hasOwnProperty(u)?e[u]=e[u]&&h:e[u]=h}})}),n==="allSelect"||n==="inverseSelect"?{selected:e}:{name:i.name,selected:e}}function so(n){n.registerAction("legendToggleSelect","legendselectchanged",z(Pt,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",z(Pt,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",z(Pt,"inverseSelect")),n.registerAction("legendSelect","legendselected",z(Pt,"select")),n.registerAction("legendUnSelect","legendunselected",z(Pt,"unSelect"))}function mr(n){n.registerComponentModel(Te),n.registerComponentView(gr),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,oo),n.registerSubTypeDefaulter("legend",function(){return"plain"}),so(n)}var lo=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},i.prototype.init=function(t,e,r){var a=Ui(t);n.prototype.init.call(this,t,e,r),xi(this,t,a)},i.prototype.mergeOption=function(t,e){n.prototype.mergeOption.call(this,t,e),xi(this,this.option,t)},i.type="legend.scroll",i.defaultOption=Et(Te.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),i}(Te);function xi(n,i,t){var e=n.getOrient(),r=[1,1];r[e.index]=0,oa(i,t,{type:"box",ignoreSize:!!r})}var Si=nt,pe=["width","height"],fe=["x","y"],uo=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t.newlineDisabled=!0,t._currentIndex=0,t}return i.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new Si),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Si)},i.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},i.prototype.renderInner=function(t,e,r,a,o,s,l){var u=this;n.prototype.renderInner.call(this,t,e,r,a,o,s,l);var h=this._controllerGroup,c=e.get("pageIconSize",!0),d=O(c)?c:[c,c];f("pagePrev",0);var p=e.getModel("pageTextStyle");h.add(new Y({name:"pageText",style:{text:"xx/xx",fill:p.getTextColor(),font:p.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),f("pageNext",1);function f(v,g){var y=v+"DataIndex",m=Gi(e.get("pageIcons",!0)[e.getOrient().name][g],{onclick:L(u._pageGo,u,y,e,a)},{x:-d[0]/2,y:-d[1]/2,width:d[0],height:d[1]});m.name=v,h.add(m)}},i.prototype.layoutInner=function(t,e,r,a,o,s){var l=this.getSelectorGroup(),u=t.getOrient().index,h=pe[u],c=fe[u],d=pe[1-u],p=fe[1-u];o&&Ct("horizontal",l,t.get("selectorItemGap",!0));var f=t.get("selectorButtonGap",!0),v=l.getBoundingRect(),g=[-v.x,-v.y],y=W(r);o&&(y[h]=r[h]-v[h]-f);var m=this._layoutContentAndController(t,a,y,u,h,d,p,c);if(o){if(s==="end")g[u]+=m[h]+f;else{var _=v[h]+f;g[u]-=_,m[c]-=_}m[h]+=v[h]+f,g[1-u]+=m[p]+m[d]/2-v[d]/2,m[d]=Math.max(m[d],v[d]),m[p]=Math.min(m[p],v[p]+g[1-u]),l.x=g[0],l.y=g[1],l.markRedraw()}return m},i.prototype._layoutContentAndController=function(t,e,r,a,o,s,l,u){var h=this.getContentGroup(),c=this._containerGroup,d=this._controllerGroup;Ct(t.get("orient"),h,t.get("itemGap"),a?r.width:null,a?null:r.height),Ct("horizontal",d,t.get("pageButtonItemGap",!0));var p=h.getBoundingRect(),f=d.getBoundingRect(),v=this._showController=p[o]>r[o],g=[-p.x,-p.y];e||(g[a]=h[u]);var y=[0,0],m=[-f.x,-f.y],_=It(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(v){var x=t.get("pageButtonPosition",!0);x==="end"?m[a]+=r[o]-f[o]:y[a]+=f[o]+_}m[1-a]+=p[s]/2-f[s]/2,h.setPosition(g),c.setPosition(y),d.setPosition(m);var S={x:0,y:0};if(S[o]=v?r[o]:p[o],S[s]=Math.max(p[s],f[s]),S[l]=Math.min(0,f[l]+m[1-a]),c.__rectSize=r[o],v){var w={x:0,y:0};w[o]=Math.max(r[o]-f[o]-_,0),w[s]=S[s],c.setClipPath(new Q({shape:w})),c.__rectSize=w[o]}else d.eachChild(function(I){I.attr({invisible:!0,silent:!0})});var M=this._getPageInfo(t);return M.pageIndex!=null&&Ni(h,{x:M.contentPosition[0],y:M.contentPosition[1]},v?t:null),this._updatePageInfoView(t,M),S},i.prototype._pageGo=function(t,e,r){var a=this._getPageInfo(e)[t];a!=null&&r.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:e.id})},i.prototype._updatePageInfoView=function(t,e){var r=this._controllerGroup;b(["pagePrev","pageNext"],function(h){var c=h+"DataIndex",d=e[c]!=null,p=r.childOfName(h);p&&(p.setStyle("fill",d?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),p.cursor=d?"pointer":"default")});var a=r.childOfName("pageText"),o=t.get("pageFormatter"),s=e.pageIndex,l=s!=null?s+1:0,u=e.pageCount;a&&o&&a.setStyle("text",F(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):o({current:l,total:u}))},i.prototype._getPageInfo=function(t){var e=t.get("scrollDataIndex",!0),r=this.getContentGroup(),a=this._containerGroup.__rectSize,o=t.getOrient().index,s=pe[o],l=fe[o],u=this._findTargetItemIndex(e),h=r.children(),c=h[u],d=h.length,p=d?1:0,f={contentPosition:[r.x,r.y],pageCount:p,pageIndex:p-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return f;var v=x(c);f.contentPosition[o]=-v.s;for(var g=u+1,y=v,m=v,_=null;g<=d;++g)_=x(h[g]),(!_&&m.e>y.s+a||_&&!S(_,y.s))&&(m.i>y.i?y=m:y=_,y&&(f.pageNextDataIndex==null&&(f.pageNextDataIndex=y.i),++f.pageCount)),m=_;for(var g=u-1,y=v,m=v,_=null;g>=-1;--g)_=x(h[g]),(!_||!S(m,_.s))&&y.i<m.i&&(m=y,f.pagePrevDataIndex==null&&(f.pagePrevDataIndex=y.i),++f.pageCount,++f.pageIndex),y=_;return f;function x(w){if(w){var M=w.getBoundingRect(),I=M[l]+w[l];return{s:I,e:I+M[s],i:w.__legendDataIndex}}}function S(w,M){return w.e>=M&&w.s<=M+a}},i.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var e,r=this.getContentGroup(),a;return r.eachChild(function(o,s){var l=o.__legendDataIndex;a==null&&l!=null&&(a=s),l===t&&(e=s)}),e??a},i.type="legend.scroll",i}(gr);function ho(n){n.registerAction("legendScroll","legendscroll",function(i,t){var e=i.scrollDataIndex;e!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:i},function(r){r.setScrollDataIndex(e)})})}function co(n){J(mr),n.registerComponentModel(lo),n.registerComponentView(uo),ho(n)}function po(n){J(mr),J(co)}var fo=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.type="dataZoom.inside",i.defaultOption=Et(ee.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),i}(ee),Oe=yt();function vo(n,i,t){Oe(n).coordSysRecordMap.each(function(e){var r=e.dataZoomInfoMap.get(i.uid);r&&(r.getRange=t)})}function go(n,i){for(var t=Oe(n).coordSysRecordMap,e=t.keys(),r=0;r<e.length;r++){var a=e[r],o=t.get(a),s=o.dataZoomInfoMap;if(s){var l=i.uid,u=s.get(l);u&&(s.removeKey(l),s.keys().length||_r(t,o))}}}function _r(n,i){if(i){n.removeKey(i.model.uid);var t=i.controller;t&&t.dispose()}}function yo(n,i){var t={model:i,containsPoint:z(_o,i),dispatchAction:z(mo,n),dataZoomInfoMap:null,controller:null},e=t.controller=new za(n.getZr());return b(["pan","zoom","scrollMove"],function(r){e.on(r,function(a){var o=[];t.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[r],u=l&&l(s.dzReferCoordSysInfo,t.model.mainType,t.controller,a);!s.model.get("disabled",!0)&&u&&o.push({dataZoomId:s.model.id,start:u[0],end:u[1]})}}),o.length&&t.dispatchAction(o)})}),t}function mo(n,i){n.isDisposed()||n.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:i})}function _o(n,i,t,e){return n.coordinateSystem.containPoint([t,e])}function xo(n){var i,t="type_",e={type_true:2,type_move:1,type_false:0,type_undefined:-1},r=!0;return n.each(function(a){var o=a.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;e[t+s]>e[t+i]&&(i=s),r=r&&o.get("preventDefaultMouseMove",!0)}),{controlType:i,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!r}}}function So(n){n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,function(i,t){var e=Oe(t),r=e.coordSysRecordMap||(e.coordSysRecordMap=it());r.each(function(a){a.dataZoomInfoMap=null}),i.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var o=nr(a);b(o.infoList,function(s){var l=s.model.uid,u=r.get(l)||r.set(l,yo(t,s.model)),h=u.dataZoomInfoMap||(u.dataZoomInfoMap=it());h.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),r.each(function(a){var o=a.controller,s,l=a.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(s=l.get(u))}if(!s){_r(r,a);return}var h=xo(l);o.enable(h.controlType,h.opt),o.setPointerChecker(a.containsPoint),ae(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var bo=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return i.prototype.render=function(t,e,r){if(n.prototype.render.apply(this,arguments),t.noTarget()){this._clear();return}this.range=t.getPercentRange(),vo(r,t,{pan:L(ve.pan,this),zoom:L(ve.zoom,this),scrollMove:L(ve.scrollMove,this)})},i.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},i.prototype._clear=function(){go(this.api,this.dataZoomModel),this.range=null},i.type="dataZoom.inside",i}(or),ve={zoom:function(n,i,t,e){var r=this.range,a=r.slice(),o=n.axisModels[0];if(o){var s=ge[i](null,[e.originX,e.originY],o,t,n),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/e.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var h=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Bt(0,a,[0,100],0,h.minSpan,h.maxSpan),this.range=a,r[0]!==a[0]||r[1]!==a[1])return a}},pan:bi(function(n,i,t,e,r,a){var o=ge[e]([a.oldX,a.oldY],[a.newX,a.newY],i,r,t);return o.signal*(n[1]-n[0])*o.pixel/o.pixelLength}),scrollMove:bi(function(n,i,t,e,r,a){var o=ge[e]([0,0],[a.scrollDelta,a.scrollDelta],i,r,t);return o.signal*(n[1]-n[0])*a.scrollDelta})};function bi(n){return function(i,t,e,r){var a=this.range,o=a.slice(),s=i.axisModels[0];if(s){var l=n(o,s,i,t,e,r);if(Bt(l,o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}}}var ge={grid:function(n,i,t,e,r){var a=t.axis,o={},s=r.model.coordinateSystem.getRect();return n=n||[0,0],a.dim==="x"?(o.pixel=i[0]-n[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=i[1]-n[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(n,i,t,e,r){var a=t.axis,o={},s=r.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return n=n?s.pointToCoord(n):[0,0],i=s.pointToCoord(i),t.mainType==="radiusAxis"?(o.pixel=i[0]-n[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=i[1]-n[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=a.inverse?-1:1),o},singleAxis:function(n,i,t,e,r){var a=t.axis,o=r.model.coordinateSystem.getRect(),s={};return n=n||[0,0],a.orient==="horizontal"?(s.pixel=i[0]-n[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=i[1]-n[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}};function wo(n){sr(n),n.registerComponentModel(fo),n.registerComponentView(bo),So(n)}var Mo=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.type="dataZoom.slider",i.layoutMode="box",i.defaultOption=Et(ee.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),i}(ee),Ot=Q,wi=7,Io=1,ye=30,To=7,Vt="horizontal",Mi="vertical",Co=5,Ao=["line","bar","candlestick","scatter"],Do={easing:"cubicOut",duration:100,delay:0},Lo=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t._displayables={},t}return i.prototype.init=function(t,e){this.api=e,this._onBrush=L(this._onBrush,this),this._onBrushEnd=L(this._onBrushEnd,this)},i.prototype.render=function(t,e,r,a){if(n.prototype.render.apply(this,arguments),ae(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),t.get("show")===!1){this.group.removeAll();return}if(t.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},i.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},i.prototype._clear=function(){Qt(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},i.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var e=this._displayables.sliderGroup=new nt;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},i.prototype._resetLocation=function(){var t=this.dataZoomModel,e=this.api,r=t.get("brushSelect"),a=r?To:0,o=this._findCoordRect(),s={width:e.getWidth(),height:e.getHeight()},l=this._orient===Vt?{right:s.width-o.x-o.width,top:s.height-ye-wi-a,width:o.width,height:ye}:{right:wi,top:o.y,width:ye,height:o.height},u=Ui(t.option);b(["right","top","width","height"],function(c){u[c]==="ph"&&(u[c]=l[c])});var h=Dt(u,s);this._location={x:h.x,y:h.y},this._size=[h.width,h.height],this._orient===Mi&&this._size.reverse()},i.prototype._positionGroup=function(){var t=this.group,e=this._location,r=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),o=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(r===Vt&&!o?{scaleY:l?1:-1,scaleX:1}:r===Vt&&o?{scaleY:l?1:-1,scaleX:-1}:r===Mi&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=t.getBoundingRect([s]);t.x=e.x-u.x,t.y=e.y-u.y,t.markRedraw()},i.prototype._getViewExtent=function(){return[0,this._size[0]]},i.prototype._renderBackground=function(){var t=this.dataZoomModel,e=this._size,r=this._displayables.sliderGroup,a=t.get("brushSelect");r.add(new Ot({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var o=new Ot({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:L(this._onClickPanel,this)}),s=this.api.getZr();a?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),r.add(o)},i.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!t)return;var e=this._size,r=this._shadowSize||[],a=t.series,o=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&o.getDimensionInfo(s)?a.getShadowDim():t.otherDim;if(l==null)return;var u=this._shadowPolygonPts,h=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||e[0]!==r[0]||e[1]!==r[1]){var c=o.getDataExtent(l),d=(c[1]-c[0])*.3;c=[c[0]-d,c[1]+d];var p=[0,e[1]],f=[0,e[0]],v=[[e[0],0],[0,0]],g=[],y=f[1]/(o.count()-1),m=0,_=Math.round(o.count()/e[0]),x;o.each([l],function(D,C){if(_>0&&C%_){m+=y;return}var T=D==null||isNaN(D)||D==="",A=T?0:B(D,c,p,!0);T&&!x&&C?(v.push([v[v.length-1][0],0]),g.push([g[g.length-1][0],0])):!T&&x&&(v.push([m,0]),g.push([m,0])),v.push([m,A]),g.push([m,A]),m+=y,x=T}),u=this._shadowPolygonPts=v,h=this._shadowPolylinePts=g}this._shadowData=o,this._shadowDim=l,this._shadowSize=[e[0],e[1]];var S=this.dataZoomModel;function w(D){var C=S.getModel(D?"selectedDataBackground":"dataBackground"),T=new nt,A=new ji({shape:{points:u},segmentIgnoreThreshold:1,style:C.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),V=new ua({shape:{points:h},segmentIgnoreThreshold:1,style:C.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return T.add(A),T.add(V),T}for(var M=0;M<3;M++){var I=w(M===1);this._displayables.sliderGroup.add(I),this._displayables.dataShadowSegs.push(I)}},i.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(e!==!1){var r,a=this.ecModel;return t.eachTargetAxis(function(o,s){var l=t.getAxisProxy(o,s).getTargetSeriesModels();b(l,function(u){if(!r&&!(e!==!0&&vt(Ao,u.get("type"))<0)){var h=a.getComponent(ut(o),s).axis,c=Ro(o),d,p=u.coordinateSystem;c!=null&&p.getOtherAxis&&(d=p.getOtherAxis(h).inverse),c=u.getData().mapDimension(c),r={thisAxis:h,series:u,thisDim:o,otherDim:c,otherAxisInverse:d}}},this)},this),r}},i.prototype._renderHandle=function(){var t=this.group,e=this._displayables,r=e.handles=[null,null],a=e.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,u=this.api,h=l.get("borderRadius")||0,c=l.get("brushSelect"),d=e.filler=new Ot({silent:c,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(d),o.add(new Ot({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:h},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:Io,fill:"rgba(0,0,0,0)"}})),b([0,1],function(_){var x=l.get("handleIcon");!sa[x]&&x.indexOf("path://")<0&&x.indexOf("image://")<0&&(x="path://"+x);var S=Lt(x,-1,0,2,2,null,!0);S.attr({cursor:Ii(this._orient),draggable:!0,drift:L(this._onDragMove,this,_),ondragend:L(this._onDragEnd,this),onmouseover:L(this._showDataInfo,this,!0),onmouseout:L(this._showDataInfo,this,!1),z2:5});var w=S.getBoundingRect(),M=l.get("handleSize");this._handleHeight=ht(M,this._size[1]),this._handleWidth=w.width/w.height*this._handleHeight,S.setStyle(l.getModel("handleStyle").getItemStyle()),S.style.strokeNoScale=!0,S.rectHover=!0,S.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),Se(S);var I=l.get("handleColor");I!=null&&(S.style.fill=I),o.add(r[_]=S);var D=l.getModel("textStyle");t.add(a[_]=new Y({silent:!0,invisible:!0,style:at(D,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:D.getTextColor(),font:D.getFont()}),z2:10}))},this);var p=d;if(c){var f=ht(l.get("moveHandleSize"),s[1]),v=e.moveHandle=new Q({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:f}}),g=f*.8,y=e.moveHandleIcon=Lt(l.get("moveHandleIcon"),-g/2,-g/2,g,g,"#fff",!0);y.silent=!0,y.y=s[1]+f/2-.5,v.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var m=Math.min(s[1]/2,Math.max(f,10));p=e.moveZone=new Q({invisible:!0,shape:{y:s[1]-m,height:f+m}}),p.on("mouseover",function(){u.enterEmphasis(v)}).on("mouseout",function(){u.leaveEmphasis(v)}),o.add(v),o.add(y),o.add(p)}p.attr({draggable:!0,cursor:Ii(this._orient),drift:L(this._onDragMove,this,"all"),ondragstart:L(this._showDataInfo,this,!0),ondragend:L(this._onDragEnd,this),onmouseover:L(this._showDataInfo,this,!0),onmouseout:L(this._showDataInfo,this,!1)})},i.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[B(t[0],[0,100],e,!0),B(t[1],[0,100],e,!0)]},i.prototype._updateInterval=function(t,e){var r=this.dataZoomModel,a=this._handleEnds,o=this._getViewExtent(),s=r.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];Bt(e,a,o,r.get("zoomLock")?"all":t,s.minSpan!=null?B(s.minSpan,l,o,!0):null,s.maxSpan!=null?B(s.maxSpan,l,o,!0):null);var u=this._range,h=this._range=pt([B(a[0],o,l,!0),B(a[1],o,l,!0)]);return!u||u[0]!==h[0]||u[1]!==h[1]},i.prototype._updateView=function(t){var e=this._displayables,r=this._handleEnds,a=pt(r.slice()),o=this._size;b([0,1],function(p){var f=e.handles[p],v=this._handleHeight;f.attr({scaleX:v/2,scaleY:v/2,x:r[p]+(p?-1:1),y:o[1]/2-v/2})},this),e.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:o[1]});var s={x:a[0],width:a[1]-a[0]};e.moveHandle&&(e.moveHandle.setShape(s),e.moveZone.setShape(s),e.moveZone.getBoundingRect(),e.moveHandleIcon&&e.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=e.dataShadowSegs,u=[0,a[0],a[1],o[0]],h=0;h<l.length;h++){var c=l[h],d=c.getClipPath();d||(d=new Q,c.setClipPath(d)),d.setShape({x:u[h],y:0,width:u[h+1]-u[h],height:o[1]})}this._updateDataInfo(t)},i.prototype._updateDataInfo=function(t){var e=this.dataZoomModel,r=this._displayables,a=r.handleLabels,o=this._orient,s=["",""];if(e.get("showDetail")){var l=e.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,h=this._range,c=t?l.calculateDataWindow({start:h[0],end:h[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(c[0],u),this._formatLabel(c[1],u)]}}var d=pt(this._handleEnds.slice());p.call(this,0),p.call(this,1);function p(f){var v=Kt(r.handles[f].parent,this.group),g=Ki(f===0?"right":"left",v),y=this._handleWidth/2+Co,m=Tt([d[f]+(f===0?-y:y),this._size[1]/2],v);a[f].setStyle({x:m[0],y:m[1],verticalAlign:o===Vt?"middle":g,align:o===Vt?g:"center",text:s[f]})}},i.prototype._formatLabel=function(t,e){var r=this.dataZoomModel,a=r.get("labelFormatter"),o=r.get("labelPrecision");(o==null||o==="auto")&&(o=e.getPixelPrecision());var s=t==null||isNaN(t)?"":e.type==="category"||e.type==="time"?e.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(o,20));return H(a)?a(t,s):F(a)?a.replace("{value}",s):s},i.prototype._showDataInfo=function(t){t=this._dragging||t;var e=this._displayables,r=e.handleLabels;r[0].attr("invisible",!t),r[1].attr("invisible",!t),e.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](e.moveHandle,1)},i.prototype._onDragMove=function(t,e,r,a){this._dragging=!0,At(a.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=Tt([e,r],o,!0),l=this._updateInterval(t,s[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},i.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},i.prototype._onClickPanel=function(t){var e=this._size,r=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(r[0]<0||r[0]>e[0]||r[1]<0||r[1]>e[1])){var a=this._handleEnds,o=(a[0]+a[1])/2,s=this._updateInterval("all",r[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},i.prototype._onBrushStart=function(t){var e=t.offsetX,r=t.offsetY;this._brushStart=new la(e,r),this._brushing=!0,this._brushStartTime=+new Date},i.prototype._onBrushEnd=function(t){if(this._brushing){var e=this._displayables.brushRect;if(this._brushing=!1,!!e){e.attr("ignore",!0);var r=e.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(r.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=pt([B(r.x,o,s,!0),B(r.x+r.width,o,s,!0)]),this._handleEnds=[r.x,r.x+r.width],this._updateView(),this._dispatchZoomAction(!1)}}}},i.prototype._onBrush=function(t){this._brushing&&(At(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},i.prototype._updateBrushRect=function(t,e){var r=this._displayables,a=this.dataZoomModel,o=r.brushRect;o||(o=r.brushRect=new Ot({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),r.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(t,e),h=l.transformCoordToLocal(s.x,s.y),c=this._size;u[0]=Math.max(Math.min(c[0],u[0]),0),o.setShape({x:h[0],y:0,width:u[0]-h[0],height:c[1]})},i.prototype._dispatchZoomAction=function(t){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?Do:null,start:e[0],end:e[1]})},i.prototype._findCoordRect=function(){var t,e=nr(this.dataZoomModel).infoList;if(!t&&e.length){var r=e[0].model.coordinateSystem;t=r.getRect&&r.getRect()}if(!t){var a=this.api.getWidth(),o=this.api.getHeight();t={x:a*.2,y:o*.2,width:a*.6,height:o*.6}}return t},i.type="dataZoom.slider",i}(or);function Ro(n){var i={x:"y",y:"x",radius:"angle",angle:"radius"};return i[n]}function Ii(n){return n==="vertical"?"ns-resize":"ew-resize"}function ko(n){n.registerComponentModel(Mo),n.registerComponentView(Lo),sr(n)}function Po(n){J(wo),J(ko)}var xr={get:function(n,i,t){var e=W((Oo[n]||{})[i]);return t&&O(e)?e[e.length-1]:e}},Oo={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},Ti=Z.mapVisual,Vo=Z.eachVisual,zo=O,Ci=b,Eo=pt,Bo=B,re=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return i.prototype.init=function(t,e,r){this.mergeDefaultAndTheme(t,r)},i.prototype.optionUpdated=function(t,e){var r=this.option;!e&&Hn(r,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},i.prototype.resetVisual=function(t){var e=this.stateList;t=L(t,this),this.controllerVisuals=gi(this.option.controller,e,t),this.targetVisuals=gi(this.option.target,e,t)},i.prototype.getItemSymbol=function(){return null},i.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,e=[];return t==null||t==="all"?this.ecModel.eachSeries(function(r,a){e.push(a)}):e=ha(t),e},i.prototype.eachTargetSeries=function(t,e){b(this.getTargetSeriesIndices(),function(r){var a=this.ecModel.getSeriesByIndex(r);a&&t.call(e,a)},this)},i.prototype.isTargetSeries=function(t){var e=!1;return this.eachTargetSeries(function(r){r===t&&(e=!0)}),e},i.prototype.formatValueText=function(t,e,r){var a=this.option,o=a.precision,s=this.dataBound,l=a.formatter,u;r=r||["<",">"],O(t)&&(t=t.slice(),u=!0);var h=e?t:u?[c(t[0]),c(t[1])]:c(t);if(F(l))return l.replace("{value}",u?h[0]:h).replace("{value2}",u?h[1]:h);if(H(l))return u?l(t[0],t[1]):l(t);if(u)return t[0]===s[0]?r[0]+" "+h[1]:t[1]===s[1]?r[1]+" "+h[0]:h[0]+" - "+h[1];return h;function c(d){return d===s[0]?"min":d===s[1]?"max":(+d).toFixed(Math.min(o,20))}},i.prototype.resetExtent=function(){var t=this.option,e=Eo([t.min,t.max]);this._dataExtent=e},i.prototype.getDataDimensionIndex=function(t){var e=this.option.dimension;if(e!=null)return t.getDimensionIndex(e);for(var r=t.dimensions,a=r.length-1;a>=0;a--){var o=r[a],s=t.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},i.prototype.getExtent=function(){return this._dataExtent.slice()},i.prototype.completeVisualOption=function(){var t=this.ecModel,e=this.option,r={inRange:e.inRange,outOfRange:e.outOfRange},a=e.target||(e.target={}),o=e.controller||(e.controller={});q(a,r),q(o,r);var s=this.isCategory();l.call(this,a),l.call(this,o),u.call(this,a,"inRange","outOfRange"),h.call(this,o);function l(c){zo(e.color)&&!c.inRange&&(c.inRange={color:e.color.slice().reverse()}),c.inRange=c.inRange||{color:t.get("gradientColor")}}function u(c,d,p){var f=c[d],v=c[p];f&&!v&&(v=c[p]={},Ci(f,function(g,y){if(Z.isValidType(y)){var m=xr.get(y,"inactive",s);m!=null&&(v[y]=m,y==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function h(c){var d=(c.inRange||{}).symbol||(c.outOfRange||{}).symbol,p=(c.inRange||{}).symbolSize||(c.outOfRange||{}).symbolSize,f=this.get("inactiveColor"),v=this.getItemSymbol(),g=v||"roundRect";Ci(this.stateList,function(y){var m=this.itemSize,_=c[y];_||(_=c[y]={color:s?f:[f]}),_.symbol==null&&(_.symbol=d&&W(d)||(s?g:[g])),_.symbolSize==null&&(_.symbolSize=p&&W(p)||(s?m[0]:[m[0],m[0]])),_.symbol=Ti(_.symbol,function(w){return w==="none"?g:w});var x=_.symbolSize;if(x!=null){var S=-1/0;Vo(x,function(w){w>S&&(S=w)}),_.symbolSize=Ti(x,function(w){return Bo(w,[0,S],[0,m[0]],!0)})}},this)}},i.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},i.prototype.isCategory=function(){return!!this.option.categories},i.prototype.setSelected=function(t){},i.prototype.getSelected=function(){return null},i.prototype.getValueState=function(t){return null},i.prototype.getVisualMeta=function(t){return null},i.type="visualMap",i.dependencies=["series"],i.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},i}(mt),Ai=[20,140],Ho=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.optionUpdated=function(t,e){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(r){r.mappingMethod="linear",r.dataExtent=this.getExtent()}),this._resetRange()},i.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(t[0]==null||isNaN(t[0]))&&(t[0]=Ai[0]),(t[1]==null||isNaN(t[1]))&&(t[1]=Ai[1])},i.prototype._resetRange=function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):O(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},i.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),b(this.stateList,function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=e[1]/3)},this)},i.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},i.prototype.getSelected=function(){var t=this.getExtent(),e=pt((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},i.prototype.getValueState=function(t){var e=this.option.range,r=this.getExtent();return(e[0]<=r[0]||e[0]<=t)&&(e[1]>=r[1]||t<=e[1])?"inRange":"outOfRange"},i.prototype.findTargetDataIndices=function(t){var e=[];return this.eachTargetSeries(function(r){var a=[],o=r.getData();o.each(this.getDataDimensionIndex(o),function(s,l){t[0]<=s&&s<=t[1]&&a.push(l)},this),e.push({seriesId:r.id,dataIndex:a})},this),e},i.prototype.getVisualMeta=function(t){var e=Di(this,"outOfRange",this.getExtent()),r=Di(this,"inRange",this.option.range.slice()),a=[];function o(p,f){a.push({value:p,color:t(p,f)})}for(var s=0,l=0,u=r.length,h=e.length;l<h&&(!r.length||e[l]<=r[0]);l++)e[l]<r[s]&&o(e[l],"outOfRange");for(var c=1;s<u;s++,c=0)c&&a.length&&o(r[s],"outOfRange"),o(r[s],"inRange");for(var c=1;l<h;l++)(!r.length||r[r.length-1]<e[l])&&(c&&(a.length&&o(a[a.length-1].value,"outOfRange"),c=0),o(e[l],"outOfRange"));var d=a.length;return{stops:a,outerColors:[d?a[0].color:"transparent",d?a[d-1].color:"transparent"]}},i.type="visualMap.continuous",i.defaultOption=Et(re.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),i}(re);function Di(n,i,t){if(t[0]===t[1])return t.slice();for(var e=200,r=(t[1]-t[0])/e,a=t[0],o=[],s=0;s<=e&&a<t[1];s++)o.push(a),a+=r;return o.push(t[1]),o}var Sr=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return i.prototype.init=function(t,e){this.ecModel=t,this.api=e},i.prototype.render=function(t,e,r,a){if(this.visualMapModel=t,t.get("show")===!1){this.group.removeAll();return}this.doRender(t,e,r,a)},i.prototype.renderBackground=function(t){var e=this.visualMapModel,r=ne(e.get("padding")||0),a=t.getBoundingRect();t.add(new Q({z2:-1,silent:!0,shape:{x:a.x-r[3],y:a.y-r[0],width:a.width+r[3]+r[1],height:a.height+r[0]+r[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},i.prototype.getControllerVisual=function(t,e,r){r=r||{};var a=r.forceState,o=this.visualMapModel,s={};if(e==="color"){var l=o.get("contentColor");s.color=l}function u(p){return s[p]}function h(p,f){s[p]=f}var c=o.controllerVisuals[a||o.getValueState(t)],d=Z.prepareVisualTypes(c);return b(d,function(p){var f=c[p];r.convertOpacityToAlpha&&p==="opacity"&&(p="colorAlpha",f=c.__alphaForOpacity),Z.dependsOn(p,e)&&f&&f.applyVisual(t,u,h)}),s[e]},i.prototype.positionGroup=function(t){var e=this.visualMapModel,r=this.api;ca(t,e.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})},i.prototype.doRender=function(t,e,r,a){},i.type="visualMap",i}(_t),Li=[["left","right","width"],["top","bottom","height"]];function br(n,i,t){var e=n.option,r=e.align;if(r!=null&&r!=="auto")return r;for(var a={width:i.getWidth(),height:i.getHeight()},o=e.orient==="horizontal"?1:0,s=Li[o],l=[0,null,10],u={},h=0;h<3;h++)u[Li[1-o][h]]=l[h],u[s[h]]=h===2?t[0]:e[s[h]];var c=[["x","width",3],["y","height",0]][o],d=Dt(u,a,e.padding);return s[(d.margin[c[2]]||0)+d[c[0]]+d[c[1]]*.5<a[c[1]]*.5?0:1]}function qt(n,i){return b(n||[],function(t){t.dataIndex!=null&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(i?i.componentIndex:"")}),n}var et=B,Go=b,Ri=Math.min,me=Math.max,No=12,Wo=6,Fo=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return i.prototype.init=function(t,e){n.prototype.init.call(this,t,e),this._hoverLinkFromSeriesMouseOver=L(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=L(this._hideIndicator,this)},i.prototype.doRender=function(t,e,r,a){(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},i.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var r=t.get("text");this._renderEndsText(e,r,0),this._renderEndsText(e,r,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},i.prototype._renderEndsText=function(t,e,r){if(e){var a=e[1-r];a=a!=null?a+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,u=this._shapes.mainGroup,h=this._applyTransform([l[0]/2,r===0?-s:l[1]+s],u),c=this._applyTransform(r===0?"bottom":"top",u),d=this._orient,p=this.visualMapModel.textStyleModel;this.group.add(new Y({style:at(p,{x:h[0],y:h[1],verticalAlign:d==="horizontal"?"middle":c,align:d==="horizontal"?c:"center",text:a})}))}},i.prototype._renderBar=function(t){var e=this.visualMapModel,r=this._shapes,a=e.itemSize,o=this._orient,s=this._useHandle,l=br(e,this.api,a),u=r.mainGroup=this._createBarGroup(l),h=new nt;u.add(h),h.add(r.outOfRange=ki()),h.add(r.inRange=ki(null,s?Oi(this._orient):null,L(this._dragHandle,this,"all",!1),L(this._dragHandle,this,"all",!0))),h.setClipPath(new Q({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var c=e.textStyleModel.getTextRect("国"),d=me(c.width,c.height);s&&(r.handleThumbs=[],r.handleLabels=[],r.handleLabelPoints=[],this._createHandle(e,u,0,a,d,o),this._createHandle(e,u,1,a,d,o)),this._createIndicator(e,u,a,d,o),t.add(u)},i.prototype._createHandle=function(t,e,r,a,o,s){var l=L(this._dragHandle,this,r,!1),u=L(this._dragHandle,this,r,!0),h=$e(t.get("handleSize"),a[0]),c=Lt(t.get("handleIcon"),-h/2,-h/2,h,h,null,!0),d=Oi(this._orient);c.attr({cursor:d,draggable:!0,drift:l,ondragend:u,onmousemove:function(y){At(y.event)}}),c.x=a[0]/2,c.useStyle(t.getModel("handleStyle").getItemStyle()),c.setStyle({strokeNoScale:!0,strokeFirst:!0}),c.style.lineWidth*=2,c.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),da(c,!0),e.add(c);var p=this.visualMapModel.textStyleModel,f=new Y({cursor:d,draggable:!0,drift:l,onmousemove:function(y){At(y.event)},ondragend:u,style:at(p,{x:0,y:0,text:""})});f.ensureState("blur").style={opacity:.1},f.stateTransition={duration:200},this.group.add(f);var v=[h,0],g=this._shapes;g.handleThumbs[r]=c,g.handleLabelPoints[r]=v,g.handleLabels[r]=f},i.prototype._createIndicator=function(t,e,r,a,o){var s=$e(t.get("indicatorSize"),r[0]),l=Lt(t.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:r[0]/2});var u=t.getModel("indicatorStyle").getItemStyle();if(l instanceof pa){var h=l.style;l.useStyle(X({image:h.image,x:h.x,y:h.y,width:h.width,height:h.height},u))}else l.useStyle(u);e.add(l);var c=this.visualMapModel.textStyleModel,d=new Y({silent:!0,invisible:!0,style:at(c,{x:0,y:0,text:""})});this.group.add(d);var p=[(o==="horizontal"?a/2:Wo)+r[0]/2,0],f=this._shapes;f.indicator=l,f.indicatorLabel=d,f.indicatorLabelPoint=p,this._firstShowIndicator=!0},i.prototype._dragHandle=function(t,e,r,a){if(this._useHandle){if(this._dragging=!e,!e){var o=this._applyTransform([r,a],this._shapes.mainGroup,!0);this._updateInterval(t,o[1]),this._hideIndicator(),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():Pi(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},i.prototype._resetInterval=function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),r=t.getExtent(),a=[0,t.itemSize[1]];this._handleEnds=[et(e[0],r,a,!0),et(e[1],r,a,!0)]},i.prototype._updateInterval=function(t,e){e=e||0;var r=this.visualMapModel,a=this._handleEnds,o=[0,r.itemSize[1]];Bt(e,a,o,t,0);var s=r.getExtent();this._dataInterval=[et(a[0],o,s,!0),et(a[1],o,s,!0)]},i.prototype._updateView=function(t){var e=this.visualMapModel,r=e.getExtent(),a=this._shapes,o=[0,e.itemSize[1]],s=t?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,r,s,"inRange"),u=this._createBarVisual(r,r,o,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},i.prototype._createBarVisual=function(t,e,r,a){var o={forceState:a,convertOpacityToAlpha:!0},s=this._makeColorGradient(t,o),l=[this.getControllerVisual(t[0],"symbolSize",o),this.getControllerVisual(t[1],"symbolSize",o)],u=this._createBarPoints(r,l);return{barColor:new fa(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},i.prototype._makeColorGradient=function(t,e){var r=100,a=[],o=(t[1]-t[0])/r;a.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var s=1;s<r;s++){var l=t[0]+o*s;if(l>t[1])break;a.push({color:this.getControllerVisual(l,"color",e),offset:s/r})}return a.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),a},i.prototype._createBarPoints=function(t,e){var r=this.visualMapModel.itemSize;return[[r[0]-e[0],t[0]],[r[0],t[0]],[r[0],t[1]],[r[0]-e[1],t[1]]]},i.prototype._createBarGroup=function(t){var e=this._orient,r=this.visualMapModel.get("inverse");return new nt(e==="horizontal"&&!r?{scaleX:t==="bottom"?1:-1,rotation:Math.PI/2}:e==="horizontal"&&r?{scaleX:t==="bottom"?-1:1,rotation:-Math.PI/2}:e==="vertical"&&!r?{scaleX:t==="left"?1:-1,scaleY:-1}:{scaleX:t==="left"?1:-1})},i.prototype._updateHandle=function(t,e){if(this._useHandle){var r=this._shapes,a=this.visualMapModel,o=r.handleThumbs,s=r.handleLabels,l=a.itemSize,u=a.getExtent();Go([0,1],function(h){var c=o[h];c.setStyle("fill",e.handlesColor[h]),c.y=t[h];var d=et(t[h],[0,l[1]],u,!0),p=this.getControllerVisual(d,"symbolSize");c.scaleX=c.scaleY=p/l[0],c.x=l[0]-p/2;var f=Tt(r.handleLabelPoints[h],Kt(c,this.group));s[h].setStyle({x:f[0],y:f[1],text:a.formatValueText(this._dataInterval[h]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",r.mainGroup):"center"})},this)}},i.prototype._showIndicator=function(t,e,r,a){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,u=[0,l[1]],h=this._shapes,c=h.indicator;if(c){c.attr("invisible",!1);var d={convertOpacityToAlpha:!0},p=this.getControllerVisual(t,"color",d),f=this.getControllerVisual(t,"symbolSize"),v=et(t,s,u,!0),g=l[0]-f/2,y={x:c.x,y:c.y};c.y=v,c.x=g;var m=Tt(h.indicatorLabelPoint,Kt(c,this.group)),_=h.indicatorLabel;_.attr("invisible",!1);var x=this._applyTransform("left",h.mainGroup),S=this._orient,w=S==="horizontal";_.setStyle({text:(r||"")+o.formatValueText(e),verticalAlign:w?x:"middle",align:w?"center":x});var M={x:g,y:v,style:{fill:p}},I={style:{x:m[0],y:m[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var D={duration:100,easing:"cubicInOut",additive:!0};c.x=y.x,c.y=y.y,c.animateTo(M,D),_.animateTo(I,D)}else c.attr(M),_.attr(I);this._firstShowIndicator=!1;var C=this._shapes.handleLabels;if(C)for(var T=0;T<C.length;T++)this.api.enterBlur(C[T])}},i.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(e){if(t._hovering=!0,!t._dragging){var r=t.visualMapModel.itemSize,a=t._applyTransform([e.offsetX,e.offsetY],t._shapes.mainGroup,!0,!0);a[1]=Ri(me(0,a[1]),r[1]),t._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=r[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},i.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},i.prototype._doHoverLinkToSeries=function(t,e){var r=this.visualMapModel,a=r.itemSize;if(r.option.hoverLink){var o=[0,a[1]],s=r.getExtent();t=Ri(me(o[0],t),o[1]);var l=Zo(r,s,o),u=[t-l,t+l],h=et(t,o,s,!0),c=[et(u[0],o,s,!0),et(u[1],o,s,!0)];u[0]<o[0]&&(c[0]=-1/0),u[1]>o[1]&&(c[1]=1/0),e&&(c[0]===-1/0?this._showIndicator(h,c[1],"< ",l):c[1]===1/0?this._showIndicator(h,c[0],"> ",l):this._showIndicator(h,h,"≈ ",l));var d=this._hoverLinkDataIndices,p=[];(e||Pi(r))&&(p=this._hoverLinkDataIndices=r.findTargetDataIndices(c));var f=va(d,p);this._dispatchHighDown("downplay",qt(f[0],r)),this._dispatchHighDown("highlight",qt(f[1],r))}},i.prototype._hoverLinkFromSeriesMouseOver=function(t){var e;if($i(t.target,function(l){var u=G(l);if(u.dataIndex!=null)return e=u,!0},!0),!!e){var r=this.ecModel.getSeriesByIndex(e.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(r)){var o=r.getData(e.dataType),s=o.getStore().get(a.getDataDimensionIndex(o),e.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},i.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var e=this._shapes.handleLabels;if(e)for(var r=0;r<e.length;r++)this.api.leaveBlur(e[r])},i.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",qt(t,this.visualMapModel)),t.length=0},i.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},i.prototype._applyTransform=function(t,e,r,a){var o=Kt(e,a?null:this.group);return O(t)?Tt(t,o,r):Ki(t,o,r)},i.prototype._dispatchHighDown=function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},i.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},i.type="visualMap.continuous",i}(Sr);function ki(n,i,t,e){return new ji({shape:{points:n},draggable:!!t,cursor:i,drift:t,onmousemove:function(r){At(r.event)},ondragend:e})}function Zo(n,i,t){var e=No/2,r=n.get("hoverLinkDataSize");return r&&(e=et(r,i,t,!0)/2),e}function Pi(n){var i=n.get("hoverLinkOnHandle");return!!(i??n.get("realtime"))}function Oi(n){return n==="vertical"?"ns-resize":"ew-resize"}var $o={type:"selectDataRange",event:"dataRangeSelected",update:"update"},Yo=function(n,i){i.eachComponent({mainType:"visualMap",query:n},function(t){t.setSelected(n.selected)})},Xo=[{createOnAllSeries:!0,reset:function(n,i){var t=[];return i.eachComponent("visualMap",function(e){var r=n.pipelineContext;!e.isTargetSeries(n)||r&&r.large||t.push(Gn(e.stateList,e.targetVisuals,L(e.getValueState,e),e.getDataDimensionIndex(n.getData())))}),t}},{createOnAllSeries:!0,reset:function(n,i){var t=n.getData(),e=[];i.eachComponent("visualMap",function(r){if(r.isTargetSeries(n)){var a=r.getVisualMeta(L(Uo,null,n,r))||{stops:[],outerColors:[]},o=r.getDataDimensionIndex(t);o>=0&&(a.dimension=o,e.push(a))}}),n.getData().setVisual("visualMeta",e)}}];function Uo(n,i,t,e){for(var r=i.targetVisuals[e],a=Z.prepareVisualTypes(r),o={color:Le(n.getData(),"color")},s=0,l=a.length;s<l;s++){var u=a[s],h=r[u==="opacity"?"__alphaForOpacity":u];h&&h.applyVisual(t,c,d)}return o.color;function c(p){return o[p]}function d(p,f){o[p]=f}}var Vi=b;function Ko(n){var i=n&&n.visualMap;O(i)||(i=i?[i]:[]),Vi(i,function(t){if(t){wt(t,"splitList")&&!wt(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&O(e)&&Vi(e,function(r){ft(r)&&(wt(r,"start")&&!wt(r,"min")&&(r.min=r.start),wt(r,"end")&&!wt(r,"max")&&(r.max=r.end))})}})}function wt(n,i){return n&&n.hasOwnProperty&&n.hasOwnProperty(i)}var zi=!1;function wr(n){zi||(zi=!0,n.registerSubTypeDefaulter("visualMap",function(i){return!i.categories&&(!(i.pieces?i.pieces.length>0:i.splitNumber>0)||i.calculable)?"continuous":"piecewise"}),n.registerAction($o,Yo),b(Xo,function(i){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,i)}),n.registerPreprocessor(Ko))}function jo(n){n.registerComponentModel(Ho),n.registerComponentView(Fo),wr(n)}var qo=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t._pieceList=[],t}return i.prototype.optionUpdated=function(t,e){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var r=this._mode=this._determineMode();this._pieceList=[],Qo[this._mode].call(this,this._pieceList),this._resetSelected(t,e);var a=this.option.categories;this.resetVisual(function(o,s){r==="categories"?(o.mappingMethod="category",o.categories=W(a)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=K(this._pieceList,function(l){return l=W(l),s!=="inRange"&&(l.visual=null),l}))})},i.prototype.completeVisualOption=function(){var t=this.option,e={},r=Z.listVisualTypes(),a=this.isCategory();b(t.pieces,function(s){b(r,function(l){s.hasOwnProperty(l)&&(e[l]=1)})}),b(e,function(s,l){var u=!1;b(this.stateList,function(h){u=u||o(t,h,l)||o(t.target,h,l)},this),!u&&b(this.stateList,function(h){(t[h]||(t[h]={}))[l]=xr.get(l,h==="inRange"?"active":"inactive",a)})},this);function o(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}n.prototype.completeVisualOption.apply(this,arguments)},i.prototype._resetSelected=function(t,e){var r=this.option,a=this._pieceList,o=(e?r:t).selected||{};if(r.selected=o,b(a,function(l,u){var h=this.getSelectedMapKey(l);o.hasOwnProperty(h)||(o[h]=!0)},this),r.selectedMode==="single"){var s=!1;b(a,function(l,u){var h=this.getSelectedMapKey(l);o[h]&&(s?o[h]=!1:s=!0)},this)}},i.prototype.getItemSymbol=function(){return this.get("itemSymbol")},i.prototype.getSelectedMapKey=function(t){return this._mode==="categories"?t.value+"":t.index+""},i.prototype.getPieceList=function(){return this._pieceList},i.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},i.prototype.setSelected=function(t){this.option.selected=W(t)},i.prototype.getValueState=function(t){var e=Z.findPieceIndex(t,this._pieceList);return e!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},i.prototype.findTargetDataIndices=function(t){var e=[],r=this._pieceList;return this.eachTargetSeries(function(a){var o=[],s=a.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var h=Z.findPieceIndex(l,r);h===t&&o.push(u)},this),e.push({seriesId:a.id,dataIndex:o})},this),e},i.prototype.getRepresentValue=function(t){var e;if(this.isCategory())e=t.value;else if(t.value!=null)e=t.value;else{var r=t.interval||[];e=r[0]===-1/0&&r[1]===1/0?0:(r[0]+r[1])/2}return e},i.prototype.getVisualMeta=function(t){if(this.isCategory())return;var e=[],r=["",""],a=this;function o(h,c){var d=a.getRepresentValue({interval:h});c||(c=a.getValueState(d));var p=t(d,c);h[0]===-1/0?r[0]=p:h[1]===1/0?r[1]=p:e.push({value:h[0],color:p},{value:h[1],color:p})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return b(s,function(h){var c=h.interval;c&&(c[0]>u&&o([u,c[0]],"outOfRange"),o(c.slice()),u=c[1])},this),{stops:e,outerColors:r}},i.type="visualMap.piecewise",i.defaultOption=Et(re.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),i}(re),Qo={splitNumber:function(n){var i=this.option,t=Math.min(i.precision,20),e=this.getExtent(),r=i.splitNumber;r=Math.max(parseInt(r,10),1),i.splitNumber=r;for(var a=(e[1]-e[0])/r;+a.toFixed(t)!==a&&t<5;)t++;i.precision=t,a=+a.toFixed(t),i.minOpen&&n.push({interval:[-1/0,e[0]],close:[0,0]});for(var o=0,s=e[0];o<r;s+=a,o++){var l=o===r-1?e[1]:s+a;n.push({interval:[s,l],close:[1,1]})}i.maxOpen&&n.push({interval:[e[1],1/0],close:[0,0]}),Ye(n),b(n,function(u,h){u.index=h,u.text=this.formatValueText(u.interval)},this)},categories:function(n){var i=this.option;b(i.categories,function(t){n.push({text:this.formatValueText(t,!0),value:t})},this),Ei(i,n)},pieces:function(n){var i=this.option;b(i.pieces,function(t,e){ft(t)||(t={value:t});var r={text:"",index:e};if(t.label!=null&&(r.text=t.label),t.hasOwnProperty("value")){var a=r.value=t.value;r.interval=[a,a],r.close=[1,1]}else{for(var o=r.interval=[],s=r.close=[0,0],l=[1,0,1],u=[-1/0,1/0],h=[],c=0;c<2;c++){for(var d=[["gte","gt","min"],["lte","lt","max"]][c],p=0;p<3&&o[c]==null;p++)o[c]=t[d[p]],s[c]=l[p],h[c]=p===2;o[c]==null&&(o[c]=u[c])}h[0]&&o[1]===1/0&&(s[0]=0),h[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(r.value=o[0])}r.visual=Z.retrieveVisuals(t),n.push(r)},this),Ei(i,n),Ye(n),b(n,function(t){var e=t.close,r=[["<","≤"][e[1]],[">","≥"][e[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,!1,r)},this)}};function Ei(n,i){var t=n.inverse;(n.orient==="vertical"?!t:t)&&i.reverse()}var Jo=function(n){P(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.doRender=function(){var t=this.group;t.removeAll();var e=this.visualMapModel,r=e.get("textGap"),a=e.textStyleModel,o=a.getFont(),s=a.getTextColor(),l=this._getItemAlign(),u=e.itemSize,h=this._getViewData(),c=h.endsText,d=Yi(e.get("showLabel",!0),!c);c&&this._renderEndsText(t,c[0],u,d,l),b(h.viewPieceList,function(p){var f=p.piece,v=new nt;v.onclick=L(this._onItemClick,this,f),this._enableHoverLink(v,p.indexInModelPieceList);var g=e.getRepresentValue(f);if(this._createItemSymbol(v,g,[0,0,u[0],u[1]]),d){var y=this.visualMapModel.getValueState(g);v.add(new Y({style:{x:l==="right"?-r:u[0]+r,y:u[1]/2,text:f.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:y==="outOfRange"?.5:1}}))}t.add(v)},this),c&&this._renderEndsText(t,c[1],u,d,l),Ct(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},i.prototype._enableHoverLink=function(t,e){var r=this;t.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(o){var s=r.visualMapModel;s.option.hoverLink&&r.api.dispatchAction({type:o,batch:qt(s.findTargetDataIndices(e),s)})}},i.prototype._getItemAlign=function(){var t=this.visualMapModel,e=t.option;if(e.orient==="vertical")return br(t,this.api,t.itemSize);var r=e.align;return(!r||r==="auto")&&(r="left"),r},i.prototype._renderEndsText=function(t,e,r,a,o){if(e){var s=new nt,l=this.visualMapModel.textStyleModel;s.add(new Y({style:at(l,{x:a?o==="right"?r[0]:0:r[0]/2,y:r[1]/2,verticalAlign:"middle",align:a?o:"center",text:e})})),t.add(s)}},i.prototype._getViewData=function(){var t=this.visualMapModel,e=K(t.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),r=t.get("text"),a=t.get("orient"),o=t.get("inverse");return(a==="horizontal"?o:!o)?e.reverse():r&&(r=r.slice().reverse()),{viewPieceList:e,endsText:r}},i.prototype._createItemSymbol=function(t,e,r){t.add(Lt(this.getControllerVisual(e,"symbol"),r[0],r[1],r[2],r[3],this.getControllerVisual(e,"color")))},i.prototype._onItemClick=function(t){var e=this.visualMapModel,r=e.option,a=r.selectedMode;if(a){var o=W(r.selected),s=e.getSelectedMapKey(t);a==="single"||a===!0?(o[s]=!0,b(o,function(l,u){o[u]=u===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},i.type="visualMap.piecewise",i}(Sr);function ts(n){n.registerComponentModel(qo),n.registerComponentView(Jo),wr(n)}function es(n){J(jo),J(ts)}function Bi(n,i,t){var e=ma.createCanvas(),r=i.getWidth(),a=i.getHeight(),o=e.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=r+"px",o.height=a+"px",e.setAttribute("data-zr-dom-id",n)),e.width=r*t,e.height=a*t,e}var _e=function(n){ga(i,n);function i(t,e,r){var a=n.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;r=r||Qi,typeof t=="string"?o=Bi(t,e,r):ft(t)&&(o=t,t=o.id),a.id=t,a.dom=o;var s=o.style;return s&&(qi(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=e,a.dpr=r,a}return i.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},i.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},i.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},i.prototype.setUnpainted=function(){this.__firstTimePaint=!0},i.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=Bi("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},i.prototype.createRepaintRects=function(t,e,r,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,l=!1,u=new Ht(0,0,0,0);function h(m){if(!(!m.isFinite()||m.isZero()))if(o.length===0){var _=new Ht(0,0,0,0);_.copy(m),o.push(_)}else{for(var x=!1,S=1/0,w=0,M=0;M<o.length;++M){var I=o[M];if(I.intersect(m)){var D=new Ht(0,0,0,0);D.copy(I),D.union(m),o[M]=D,x=!0;break}else if(l){u.copy(m),u.union(I);var C=m.width*m.height,T=I.width*I.height,A=u.width*u.height,V=A-C-T;V<S&&(S=V,w=M)}}if(l&&(o[w].union(m),x=!0),!x){var _=new Ht(0,0,0,0);_.copy(m),o.push(_)}l||(l=o.length>=s)}}for(var c=this.__startIndex;c<this.__endIndex;++c){var d=t[c];if(d){var p=d.shouldBePainted(r,a,!0,!0),f=d.__isRendered&&(d.__dirty&be||!p)?d.getPrevPaintRect():null;f&&h(f);var v=p&&(d.__dirty&be||!d.__isRendered)?d.getPaintRect():null;v&&h(v)}}for(var c=this.__prevStartIndex;c<this.__prevEndIndex;++c){var d=e[c],p=d&&d.shouldBePainted(r,a,!0,!0);if(d&&(!p||!d.__zr)&&d.__isRendered){var f=d.getPrevPaintRect();f&&h(f)}}var g;do{g=!1;for(var c=0;c<o.length;){if(o[c].isZero()){o.splice(c,1);continue}for(var y=c+1;y<o.length;)o[c].intersect(o[y])?(g=!0,o[c].union(o[y]),o.splice(y,1)):y++;c++}}while(g);return this._paintRects=o,o},i.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},i.prototype.resize=function(t,e){var r=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=t+"px",o.height=e+"px"),a.width=t*r,a.height=e*r,s&&(s.width=t*r,s.height=e*r,r!==1&&this.ctxBack.scale(r,r))},i.prototype.clear=function(t,e,r){var a=this.dom,o=this.ctx,s=a.width,l=a.height;e=e||this.clearColor;var u=this.motionBlur&&!t,h=this.lastFrameAlpha,c=this.dpr,d=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/c,l/c));var p=this.domBack;function f(v,g,y,m){if(o.clearRect(v,g,y,m),e&&e!=="transparent"){var _=void 0;if(_a(e)){var x=e.global||e.__width===y&&e.__height===m;_=x&&e.__canvasGradient||xa(o,e,{x:0,y:0,width:y,height:m}),e.__canvasGradient=_,e.__width=y,e.__height=m}else Sa(e)&&(e.scaleX=e.scaleX||c,e.scaleY=e.scaleY||c,_=ba(o,e,{dirty:function(){d.setUnpainted(),d.painter.refresh()}}));o.save(),o.fillStyle=_||e,o.fillRect(v,g,y,m),o.restore()}u&&(o.save(),o.globalAlpha=h,o.drawImage(p,v,g,y,m),o.restore())}!r||u?f(0,0,s,l):r.length&&b(r,function(v){f(v.x*c,v.y*c,v.width*c,v.height*c)})},i}(ya),Hi=1e5,ct=314159,Xt=.01,is=.001;function rs(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function as(n,i){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+n+"px","height:"+i+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var ns=function(){function n(i,t,e,r){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!i.nodeName||i.nodeName.toUpperCase()==="CANVAS";this._opts=e=X({},e||{}),this.dpr=e.devicePixelRatio||Qi,this._singleCanvas=a,this.root=i;var o=i.style;o&&(qi(i),i.innerHTML=""),this.storage=t;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var h=i,c=h.width,d=h.height;e.width!=null&&(c=e.width),e.height!=null&&(d=e.height),this.dpr=e.devicePixelRatio||1,h.width=c*this.dpr,h.height=d*this.dpr,this._width=c,this._height=d;var p=new _e(h,this,this.dpr);p.__builtin__=!0,p.initContext(),l[ct]=p,p.zlevel=ct,s.push(ct),this._domRoot=i}else{this._width=Nt(i,0,e),this._height=Nt(i,1,e);var u=this._domRoot=as(this._width,this._height);i.appendChild(u)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var i=this.getViewportRoot();if(i)return{offsetLeft:i.offsetLeft||0,offsetTop:i.offsetTop||0}},n.prototype.refresh=function(i){var t=this.storage.getDisplayList(!0),e=this._prevDisplayList,r=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,e,i,this._redrawId);for(var a=0;a<r.length;a++){var o=r[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var l=a===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(i){var t=i.length,e=this._hoverlayer;if(e&&e.clear(),!!t){for(var r={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<t;o++){var s=i[o];s.__inHover&&(e||(e=this._hoverlayer=this.getLayer(Hi)),a||(a=e.ctx,a.save()),Gt(a,s,r,o===t-1))}a&&a.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(Hi)},n.prototype.paintOne=function(i,t){wa(i,t)},n.prototype._paintList=function(i,t,e,r){if(this._redrawId===r){e=e||!1,this._updateLayerStatus(i);var a=this._doPaintList(i,t,e),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(i),o)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;Ma(function(){l._paintList(i,t,e,r)})}}},n.prototype._compositeManually=function(){var i=this.getLayer(ct).ctx,t=this._domRoot.width,e=this._domRoot.height;i.clearRect(0,0,t,e),this.eachBuiltinLayer(function(r){r.virtual&&i.drawImage(r.dom,0,0,t,e)})},n.prototype._doPaintList=function(i,t,e){for(var r=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||e)&&a.push(u)}for(var h=!0,c=!1,d=function(v){var g=a[v],y=g.ctx,m=o&&g.createRepaintRects(i,t,p._width,p._height),_=e?g.__startIndex:g.__drawIndex,x=!e&&g.incremental&&Date.now,S=x&&Date.now(),w=g.zlevel===p._zlevelList[0]?p._backgroundColor:null;if(g.__startIndex===g.__endIndex)g.clear(!1,w,m);else if(_===g.__startIndex){var M=i[_];(!M.incremental||!M.notClear||e)&&g.clear(!1,w,m)}_===-1&&(console.error("For some unknown reason. drawIndex is -1"),_=g.__startIndex);var I,D=function(V){var R={inHover:!1,allClipped:!1,prevEl:null,viewWidth:r._width,viewHeight:r._height};for(I=_;I<g.__endIndex;I++){var k=i[I];if(k.__inHover&&(c=!0),r._doPaintEl(k,g,o,V,R,I===g.__endIndex-1),x){var $=Date.now()-S;if($>15)break}}R.prevElClipPaths&&y.restore()};if(m)if(m.length===0)I=g.__endIndex;else for(var C=p.dpr,T=0;T<m.length;++T){var A=m[T];y.save(),y.beginPath(),y.rect(A.x*C,A.y*C,A.width*C,A.height*C),y.clip(),D(A),y.restore()}else y.save(),D(),y.restore();g.__drawIndex=I,g.__drawIndex<g.__endIndex&&(h=!1)},p=this,f=0;f<a.length;f++)d(f);return N.wxa&&b(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:h,needsRefreshHover:c}},n.prototype._doPaintEl=function(i,t,e,r,a,o){var s=t.ctx;if(e){var l=i.getPaintRect();(!r||l&&l.intersect(r))&&(Gt(s,i,a,o),i.setPrevPaintRect(l))}else Gt(s,i,a,o)},n.prototype.getLayer=function(i,t){this._singleCanvas&&!this._needsManuallyCompositing&&(i=ct);var e=this._layers[i];return e||(e=new _e("zr_"+i,this,this.dpr),e.zlevel=i,e.__builtin__=!0,this._layerConfig[i]?q(e,this._layerConfig[i],!0):this._layerConfig[i-Xt]&&q(e,this._layerConfig[i-Xt],!0),t&&(e.virtual=t),this.insertLayer(i,e),e.initContext()),e},n.prototype.insertLayer=function(i,t){var e=this._layers,r=this._zlevelList,a=r.length,o=this._domRoot,s=null,l=-1;if(!e[i]&&rs(t)){if(a>0&&i>r[0]){for(l=0;l<a-1&&!(r[l]<i&&r[l+1]>i);l++);s=e[r[l]]}if(r.splice(l+1,0,i),e[i]=t,!t.virtual)if(s){var u=s.dom;u.nextSibling?o.insertBefore(t.dom,u.nextSibling):o.appendChild(t.dom)}else o.firstChild?o.insertBefore(t.dom,o.firstChild):o.appendChild(t.dom);t.painter||(t.painter=this)}},n.prototype.eachLayer=function(i,t){for(var e=this._zlevelList,r=0;r<e.length;r++){var a=e[r];i.call(t,this._layers[a],a)}},n.prototype.eachBuiltinLayer=function(i,t){for(var e=this._zlevelList,r=0;r<e.length;r++){var a=e[r],o=this._layers[a];o.__builtin__&&i.call(t,o,a)}},n.prototype.eachOtherLayer=function(i,t){for(var e=this._zlevelList,r=0;r<e.length;r++){var a=e[r],o=this._layers[a];o.__builtin__||i.call(t,o,a)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(i){this.eachBuiltinLayer(function(c,d){c.__dirty=c.__used=!1});function t(c){a&&(a.__endIndex!==c&&(a.__dirty=!0),a.__endIndex=c)}if(this._singleCanvas)for(var e=1;e<i.length;e++){var r=i[e];if(r.zlevel!==i[e-1].zlevel||r.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,l;for(l=0;l<i.length;l++){var r=i[l],u=r.zlevel,h=void 0;s!==u&&(s=u,o=0),r.incremental?(h=this.getLayer(u+is,this._needsManuallyCompositing),h.incremental=!0,o=1):h=this.getLayer(u+(o>0?Xt:0),this._needsManuallyCompositing),h.__builtin__||Ia("ZLevel "+u+" has been used by unkown layer "+h.id),h!==a&&(h.__used=!0,h.__startIndex!==l&&(h.__dirty=!0),h.__startIndex=l,h.incremental?h.__drawIndex=-1:h.__drawIndex=l,t(l),a=h),r.__dirty&be&&!r.__inHover&&(h.__dirty=!0,h.incremental&&h.__drawIndex<0&&(h.__drawIndex=l))}t(l),this.eachBuiltinLayer(function(c,d){!c.__used&&c.getElementCount()>0&&(c.__dirty=!0,c.__startIndex=c.__endIndex=c.__drawIndex=0),c.__dirty&&c.__drawIndex<0&&(c.__drawIndex=c.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(i){i.clear()},n.prototype.setBackgroundColor=function(i){this._backgroundColor=i,b(this._layers,function(t){t.setUnpainted()})},n.prototype.configLayer=function(i,t){if(t){var e=this._layerConfig;e[i]?q(e[i],t,!0):e[i]=t;for(var r=0;r<this._zlevelList.length;r++){var a=this._zlevelList[r];if(a===i||a===i+Xt){var o=this._layers[a];q(o,e[i],!0)}}}},n.prototype.delLayer=function(i){var t=this._layers,e=this._zlevelList,r=t[i];r&&(r.dom.parentNode.removeChild(r.dom),delete t[i],e.splice(vt(e,i),1))},n.prototype.resize=function(i,t){if(this._domRoot.style){var e=this._domRoot;e.style.display="none";var r=this._opts,a=this.root;if(i!=null&&(r.width=i),t!=null&&(r.height=t),i=Nt(a,0,r),t=Nt(a,1,r),e.style.display="",this._width!==i||t!==this._height){e.style.width=i+"px",e.style.height=t+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(i,t);this.refresh(!0)}this._width=i,this._height=t}else{if(i==null||t==null)return;this._width=i,this._height=t,this.getLayer(ct).resize(i,t)}return this},n.prototype.clearLayer=function(i){var t=this._layers[i];t&&t.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(i){if(i=i||{},this._singleCanvas&&!this._compositeManually)return this._layers[ct].dom;var t=new _e("image",this,i.pixelRatio||this.dpr);t.initContext(),t.clear(!1,i.backgroundColor||this._backgroundColor);var e=t.ctx;if(i.pixelRatio<=this.dpr){this.refresh();var r=t.dom.width,a=t.dom.height;this.eachLayer(function(c){c.__builtin__?e.drawImage(c.dom,0,0,r,a):c.renderToCanvas&&(e.save(),c.renderToCanvas(e),e.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var h=s[l];Gt(e,h,o,l===u-1)}return t.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}();function os(n){n.registerPainter("canvas",ns)}window.echarts=Ta;J([Ea,Ba,Ha,Fn,Bn,cn,os,es,po,io,jn,Po]);const ss="#ec7671",ls="#30cc61",us="#dce716",lt={red:ss,green:ls,yellow:us};function hs(n,i,t){const e=n.summaries,r=Object.keys(e),a=[],o=[],s=100,l=s*2,u=5;let h=u;const c=s*2,d=600,p=8,f=d/p,v=10,g=50,y=70,m=15;return r.forEach((x,S)=>{const w=e[x],M=Object.keys(w);let I=0;M.forEach((C,T)=>{const A=e[x][C];let V=l,R=c,k=x,$=s*.9,U=h,E=h,tt=!0;C!=="all"?(tt=!1,$*=.6,V=l,R=f,k=C.limit(10),T===1?(I+=c+v,h+=m,U+=m,E=U):T!==1&&(T-1)%p===0?(h+=l/2+y,U=h,E=h,I=c+v):I+=f+g):U+=r.length>1?s:s/2;let ot=A[0]+A[2];const j=A[0]/ot,xt=j<i;let Rt=lt.yellow;(tt||!xt)&&(Rt=lt.green);let Ve=0;if(xt){let St=A[0],ze=ot,Ee=i*100,Be=100;Ve=Math.round((Ee*ze-St*Be)/(Be-Ee))}o.push({text:k,subtext:`${Math.round(j*100)}%`+(tt||!xt?"":` (-${Ve}p)`),top:E+"px",left:I+"px"}),a.push({type:"pie",radius:[$,"15%"],top:U+"px",height:V,left:I,width:R,label:{position:"inside",formatter:function(St){return St.data.isGroup?`${St.value} ${t.students}`:`${St.data.value}p
(${St.data.details.length} pr.)`}},color:[Rt,lt.red],data:[{name:"ok"+x+C,value:A[0],details:A[1],total:ot,isGroup:tt},{name:"ko"+x+C,value:A[2],details:A[3],total:ot,isGroup:tt}]})}),h+=l,M.length-1<=p&&(h+=l/2+y)}),a.length===2&&(o[0].text=o[1].text,o[0].subtext=o[1].subtext,o.pop(),a[0].data=a[1].data,a[0].color=a[1].color,a.pop()),{initialSummaryTop:u,summaryTop:h,summariesChartOption:{title:o,series:a,tooltip:{trigger:"item",formatter:function(x){return x.data.details.join(",")}}}}}function cs(n,i,t){const e=n.evaluations,r=n.datesWindow,a=Object.keys(e);let o=0;const s=o++,l=o++,u=o++,h=o++;o++,o++;const c=o++,d=o++;let p={yAxis:i*100,symbol:"none",emphasis:{disabled:!0},label:{show:!1},lineStyle:{color:"#53c048"}};const f=[],v=[],g=[],y=[],m=[],_=[],x=[];let S=0;const w=[];a.forEach(R=>{const k=e[R],$=Object.keys(k);let U=0;$.forEach(E=>{const tt=k[E],ot=[];tt.forEach(j=>{let xt=lt.green,Rt=0;j[u]==0&&(xt=lt.red,Rt=180),ot.push({name:"name",value:"",xAxis:j[s],yAxis:j[l],itemStyle:{color:xt},emphasis:{disabled:!0},symbol:"pin",symbolSize:20,symbolRotate:Rt}),U=j[l]}),w[E]=U>=i*100,y.push({name:E,data:tt,type:"line",...p!=null&&{markLine:{symbol:"arrow",data:[p]}},markPoint:{data:ot},lineStyle:{type:"dotted",cap:"round"},xAxisIndex:S,yAxisIndex:S,...$.length===1&&{endLabel:{show:!0,formatter:function(j){return j.seriesName}}}})}),f.push({show:!0,borderWidth:2,shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:2}),v.push({type:"time",gridIndex:S,min:r[0],max:r[1]}),g.push({type:"value",max:100,gridIndex:S}),m.push({textAlign:"center",text:R,textStyle:{fontSize:12}}),_.push($.length<=1?{show:!1}:{data:$.map(E=>new Object({name:E,icon:w[E]?"":"triangle",itemStyle:{borderColor:lt.red,borderWidth:w[E]?0:2}})),orient:"horizontal",formatter:function(E){return E.limit(15)}}),x.push($.length>1?{}:{type:"piecewise",dimension:1,color:[lt.green,lt.red],min:0,max:100,show:!1}),S++});const M=S+1,I=10,D=15,T=(100-(D*M-1))/M;let A=I;f.forEach(function(R,k){R.left="3%",R.width="90%",R.height=`${T}%`,R.top=`${A}%`,m[k].left=`${parseFloat(R.left)+parseFloat(R.width)/2}%`,m[k].top=`${parseFloat(R.top)-8}%`,_[k].top=`${parseFloat(R.top)-D/2.5}%`,_[k].width=`${parseFloat(R.width)}%`,_[k].left=`${parseFloat(R.left)}%`,A+=T+D});let V={title:m.concat([{text:t.evolution,top:0,left:0}]),grid:f,xAxis:v,yAxis:g,series:y,legend:_,visualMaps:x,tooltip:{trigger:"axis",formatter:function(R){const k=R[0].data,$=`${t.projectName}: <b>${k[c]}</b> (${k[d]})<br />${t.date}: ${new Date(k[s]).toLocaleDateString()}<br />`;if(R.length===1)return`${R[0].seriesName}<br />`+$+`${t.result}: ${k[u]}/${k[h]}p<br />${t.summary}: ${k[l]}%`;let U={success:[],failure:[]};return R.forEach(function(E){const tt=E.seriesName,j=E.data[u]>0;U[j?"success":"failure"].push(tt)}),$+"<br/>ok:"+U.success.join("<br />")+"<br/><br/>ko:"+U.failure.join("<br />")}},dataZoom:{type:"slider",xAxisIndex:f.map((R,k)=>k),startValue:r[2],endValue:r[3],top:parseFloat(f[f.length-1].top)+parseFloat(f[f.length-1].height)+4+(f.length===1?10:0)+"%"}};return{groupsForEvaluation:a,evolutionChartOption:V}}window.prepareSummariesChartData=hs;window.prepareEvaluationChartsData=cs;
